\section{Proving that \ModC satisifes \SrobustB}
\label{s:examples}
We now revisit our example from  \S  \ref{s:intro} and \S \ref{s:outline},
and outline a proof that \ModC satisfies \SrobustB. 

\subsection{\SrobustB: Holistic Spec for Bank/account modules}


\subsection{Proving adherence of \ModC to \SrobustB.} 


We fist give the functional spec for all methods in \ModC.
 
\begin{lstlisting}[mathescape=true,xleftmargin=2em,frame=lines,framexleftmargin=1.5em, language=Chainmail]
$\prg{FuncSpec\_transfer}$  $\triangleq$
   method transfer(dest:Account, pwd':Password) -> void  
      (PRE: this.balance$=$bal1 $\wedge$ dest.balance$=$bal2 $\wedge$ this.pwd$=$pwd' $\wedge$ this$\neq$dest
       POST: this.balance=bal1-100 $\wedge$ dest.balance=bal2+100)
      (PRE: this.balance$=$bal1 $\wedge$ dest.balance$=$bal2 $\wedge$ (this.pwd$\neq$pwd' $\vee$ this$=$dest)
       POST: this.balance=bal1 $\wedge$ dest.balance=bal2)
      (PRE: a:Account $\wedge$ a.balance$=$bal $\wedge$ a$\neq$this $\wedge$ a$\neq$dest 
       POST: a.balance=bal)          
      (PRE: a:Account $\wedge$ a.pwd$=$pwd1  
       POST: a.pwd=pwd1)
       (PRE: a:Account $\wedge$ a.pwd$=$pwd1  $\wedge$ $\protectedFrom{\prg{pwd1}}x$
       POST: $\protectedFrom{\prg{pwd1}}x$)         
\end{lstlisting}

\begin{lstlisting}[mathescape=true,xleftmargin=2em,frame=lines,framexleftmargin=1.5em, language=Chainmail]
$\prg{FuncSpec\_set}$  $\triangleq$
   method set(oldPwd: Password, newPwd:Password) -> void  
      (PRE: this.pwd$=$oldPwd  
       POST: this.pwd$=$newPwd)
       (PRE: this.pwd$=$somePwd  $\wedge$ this.pwd$\neq$oldPwd 
       POST: this.pwd$=$somePwd)
      (PRE: a:Account $\wedge$ a.balance$=$bal  
       POST: a.balance=bal)          
      (PRE: a:Account $\wedge$ a.pwd$=$pwd1 $\wedge$ a$\neq$this
       POST: a.pwd=pwd1)
       (PRE: a:Account $\wedge$ a.pwd$=$pwd1  $\wedge$ $\protectedFrom{\prg{pwd1}}x$
       POST: $\protectedFrom{\prg{pwd1}}x$)         
\end{lstlisting}

The holisitic specification is



\subsection{Part 1: Assertion Encapsulation}
\label{s:BA-encap}


\subsection{Part 2: Proving method bodies}
\label{s:BA-bodies}

\subsection{Part 3: Proving module invariants}
\label{s:BA-modules}
