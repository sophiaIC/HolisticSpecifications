\section{Appendix to Section \ref{s:preserve} -- Preservation of Satisfaction of Assertions}
\label{app:preserve}

The proof of lemma \ref{lemma:addr:expr} is by induction on the structure of $A$.

\vspace{.2cm}

% An assertion is {\emph {stable}}, written as $\Stable A$ if it does not contain $\inside {\re}$ assertions:
\begin{definition}
\label{def:Basic}
%\begin{figure}[hbt]
[$\Stable{\_}$] assertions: %  defined below

$
\begin{array}{l}
 \begin{array}{lll}
  \Stable {\inside{\re}}  \triangleq  false & \lclSPACE &   \Stable {\protectedFrom \re {\overline {u}}} =  
  \Stable  {\internal \re} =  %   \PushAS y  {(\external \re)} & \triangleq &   {\external \re}
    \Stable {\re}=   
     \Stable {\re:C}\   \triangleq \    true
 \end{array}
  \\
 \begin{array}{lcl}
 \Stable  {A_1  \wedge  A_2}\  \triangleq\     \Stable  { A_1}  \wedge    \Stable  {A_2}    &
\lclSPACE  &  
 \Stable  {\forall x:C.A} =\Stable  {\neg A} \   \triangleq\   \Stable A
 \end{array}
 \end{array}
$
\label{f:Basic}
 \end{definition}


 \begin{definition}
% \begin{figure}[hbt]
[$\Pos{\_}$] assertions: %  defined below

$
\begin{array}{l}
 \begin{array}{l}
  \Pos {\inside{\re}} =  \Pos {\protectedFrom \re {\overline {u}}} =  
  \Pos  {\internal \re} =   
    \Pos {\re}=   
     \Pos {\re:C}\   \triangleq \    true
 \end{array}
  \\
 \begin{array}{lll}
 \Pos  {A_1  \wedge  A_2}\  \triangleq\     \Pos  { A_1}  \wedge    \Pos  {A_2}   \  &    
 \Pos  {\forall x:C.A}   \triangleq\   \Pos A
\   &
  \Pos {\neg A}  \triangleq \Neg A
 \end{array}
 \end{array}
 $
 \label{def:Pos}
\end{definition}

\begin{definition}
[$\Neg{\_}$] assertions:

$
\begin{array}{l}
 \begin{array}{lll}
  \Neg {\inside{\re}}\  \triangleq \    false &    \Neg {\protectedFrom \re {\overline {u}}} =  
  \Neg  {\internal \re} =   
    \Neg {\re}=   
     \Neg {\re:C}\   \triangleq \    true
\\ 
 \Neg  {A_1  \wedge  A_2}\  \triangleq\     \Neg  { A_1}  \wedge    \Neg  {A_2}   \ \   
 &    
 \Neg  {\forall x:C.A}   \triangleq\   \Neg A \ \ 
&
  \Neg {\neg A}  \triangleq \Pos A
 \end{array}
 \end{array}
$
\label{def:Neg}
\end{definition}

The definitions of $\Pos{\_}$ and $\Neg {\_}$ are less  general than would be   possible. \Eg $(\inside {x} \rightarrow  x.f=4) \rightarrow xf.3=7$  does not satisfy our definition of $\Pos {\_}$.
We have given these less general definitions in order to simplify our proofs.
The proof of lemma \ref{l:assrt:unaffect} is by induction on the structure of$A$.

\vspace{.2cm}