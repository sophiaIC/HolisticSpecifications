%% For double-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For double-blind review submission, w/ CCS and ACM Reference
\documentclass[acmsmall,review,anonymous,screen]{acmart}\settopmatter{printfolios=true,printacmref=false}
%% For single-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For single-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true}
%% For final camera-ready submission, w/ required CCS and ACM Reference
%\documentclass[acmsmall]{acmart}\settopmatter{}
\usepackage[shortlabels]{enumitem}
\usepackage{mathtools}
\usepackage{wrapfig}
\usepackage{stackrel}

\DeclareSymbolFont{arrows}{U}{FdSymbolC}{m}{n}

% \usepackage{ amssymb }
\DeclareTextFontCommand{\texttt}{\ttfamily}

%% Journal information
%% Supplied to authors by publisher for camera-ready submission;
%% use defaults for review submission.
\acmJournal{PACMPL}
\acmVolume{}
\acmNumber{POPL} % CONF = POPL or ICFP or OOPSLA
\acmArticle{}
\acmYear{2025}
\acmMonth{1}
\acmDOI{} % \acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}

%% Copyright information
%% Supplied to authors (based on authors' rights management selection;
%% see authors.acm.org) by publisher for camera-ready submission;
%% use 'none' for review submission.
\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\copyrightyear{2018}           %% If different from \acmYear

%% Bibliography style
\bibliographystyle{ACM-Reference-Format}
%% Citation style
%% Note: author/year citations are required for papers published as an
%% issue of PACMPL.
%\citestyle{acmauthoryear}   %% For author/year citations
\citestyle{acmnumeric}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Note: Authors migrating a paper from PACMPL format to traditional
%% SIGPLAN proceedings format must update the '\documentclass' and
%% topmatter commands above; see 'acmart-sigplanproc-template.tex'.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% Some recommended packages.
\usepackage{booktabs}   %% For formal tables:
                        %% http://ctan.org/pkg/booktabs
\usepackage{subcaption} %% For complex figures with subfigures/subcaptions
                        %% http://ctan.org/pkg/subcaption
 \usepackage{ stmaryrd }                       

\usepackage{relsize}
\usepackage{mathpartir}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{listings}
\usepackage{xspace}
\usepackage{definitions}
\usepackage{multirow,bigdelim}
\usepackage{pbox}
\usepackage{courier}
\usepackage{soul}
\usepackage{centernot}
 

\newcommand\multibrace[3]{\rdelim\}{#1}{3mm}[\pbox{#2}{#3}]}


%%these COLOUR MACROS ARE ACTIVELY FUCKING EVIL
%%DO NOT DO THIS. EVER
%%AT LEast have some ovious way to TURN THEM OFF

\definecolor{ferngreen}{rgb}{0.31, 0.47, 0.26}
\newcommand{\kjx}[1]{{}}
\newcommand{\scd}[1]{{}}
%\newcommand{\sdN}[1]{{\color{dkgreen}{#1}}}
%\newcommand{\jm}[1]{{\color{magenta}{JM: #1}}}
\newcommand{\sdcomment}[1]{{}}
\newcommand{\secomment}[1]{{}}
\newcommand{\jncomment}[1]{{}}

\newcommand{\sd}[1]{{{#1}}}
\newcommand{\se}[1] {#1} %{{\color{brown}{#1}}}
\newcommand{\sue}[1] {{\color{brown}{#1}}}
\definecolor{amber}{rgb}{1.0, 0.75, 0.0}
\definecolor{amethyst}{rgb}{0.6, 0.4, 0.8}

\newcommand{\ponders}[3]{\marginpar{\tiny\itshape\raggedright\textcolor{#2}{\textbf{#1:} #3}}\ignorespaces}
\renewcommand{\ponders}[3]{{#3\ignorespaces}}  %TURNING IT OFF. NOT THAT IT FUCKING HEPLS

\marginparwidth=1.6cm \marginparsep=0cm
\newcommand{\TODO}[1]{} % {{\color{red}#1}}
\newcommand{\sophia}[1]{{#1}}
\newcommand{\toby}[1]{} % {\ponders{Toby}{purple}{#1}}
\newcommand{\susan}[2][]{{#2}\xspace}
\newcommand{\james}[1]{\ponders{James}{orange}{#1}}
\newcommand{\jm}[2][]{\ponders{Julian}{magenta}{#1} {#2}\xspace}
\newcommand{\mrr}[2][]{\ponders{Matthew Ross}{offblue}{{#1}} {{#2}}\xspace}
\newcommand{\sdNr}[2][]{\ponders{SD:}{amber}{#1} {#2}\xspace}
\newcommand{\sdN}[1]{{{#1}}}
\newcommand{\sdNO}[1]{\red{ {#1}}} %{\ponders{SD:}{amber}{ } {#1}\xspace}
\newcommand{\julian}[1]{{#1}\xspace}
\newcommand{\sdM}[1]{#1\xspace}

\newcommand{\sophiaPonder}[2][]{\ponders{Sophia}{blue}{#1}{#2}\xspace}
\renewcommand{\sophia}[2][]{}

\newcommand{\sdfootnote}[1]{}



\begin{document}

%% Title information
%\title[Specification and Proof of Necessary Conditions]{Specification
%and Proof of Necessary Conditions}         %% [Short Title] is
%optional;
%\title{Necessity Specifications are Necessary
%\title{Reasoning about External Calls with Limited Effects}
\title{What is Protection?}


%% Author with two affiliations and emails.
\author{Julian Mackay}
%\authornote{with author2 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
\orcid{0000-0003-3098-3901}             %% \orcid is optional
\affiliation{
  %\position{Position2a}
  %\department{Engineering and Computer Science}             %% \department is recommended
  \institution{Victoria University of Wellington}           %% \institution is required
  %\streetaddress{Street2a Address2a}
  %\city{City2a}
  %\state{State2a}
  %\postcode{Post-Code2a}
  \country{New Zealand}                   %% \country is recommended
}
\email{julian.mackay@ecs.vuw.ac.nz}         %% \email is recommended

 

%% Abstract
%% Note: \begin{abstract}...\end{abstract} environment must come
%% before \maketitle command


  

%% 2012 ACM Computing Classification System (CSS) concepts
%% Generate at 'http://dl.acm.org/ccs/ccs.cfm'.
\begin{CCSXML}
<ccs2012>
   <concept>
       <concept_id>10011007.10010940.10010992.10010993.10011683</concept_id>
       <concept_desc>Software and its engineering~Access protection</concept_desc>
       <concept_significance>300</concept_significance>
       </concept>
   <concept>
       <concept_id>10011007.10011074.10011099.10011692</concept_id>
       <concept_desc>Software and its engineering~Formal software verification</concept_desc>
       <concept_significance>500</concept_significance>
       </concept>
   <concept>
       <concept_id>10003752.10003790.10011741</concept_id>
       <concept_desc>Theory of computation~Hoare logic</concept_desc>
       <concept_significance>500</concept_significance>
       </concept>
   <concept>
       <concept_id>10011007.10011006.10011008.10011009.10011011</concept_id>
       <concept_desc>Software and its engineering~Object oriented languages</concept_desc>
       <concept_significance>300</concept_significance>
       </concept>
 </ccs2012>
\end{CCSXML}

\ccsdesc[300]{Software and its engineering~Access protection}
\ccsdesc[500]{Software and its engineering~Formal software verification}
\ccsdesc[500]{Theory of computation~Hoare logic}
\ccsdesc[300]{Object oriented programming~Object capabilities}



%% End of generated code

  
%% End of generated code


%% Keywords
%% comma separated list
%%%%%%%%%%%%%%%%%%%%%\keywords{keyword1, keyword2, keyword3}  %% \keywords are mandatory in final camera-ready submission



%% Note: \maketitle command must come after title commands, author
%% commands, abstract environment, Computing Classification System
%% environment and commands, and keywords command.


\begin{abstract}

the aim is to systematically derive the concept of protection
\end{abstract}

\maketitle 

\section{Capabilities guarding effects}

\newcommand{\Eff}{E\!f\!f}

We say that a capability $\re$ guards an effect %$\Eff$, if $\Eff$ 
if the effect cannot take place -- or be observed--  from an  external state, unless some external objet makes a call on $\re$.  To make this concept precise, we need to make precise 1) the effect   being observed, and 2) making a call on $\re$. Wrt 1): the effect   is observed iff we go from a state satisfying $A$ to a state which does not satisfy $A$. And wrt 2): an external object makes a call on $\re$ iff $\re$ is the receiver or one of the arguments. This leads to the following definitions:

%\newcommand{\callsOn}[2]{{#1}{\stackrel{calls}{\longrightarrow}}{#2}}

\newcommand{\ExtCallsOn}[1]{ {\mathcal E}\!\mathit{xt}{\mathcal C}\!\mathit{ll}{\mathcal O\!}\mathit{n}(#1)}
\newcommand{\callsOn}[1] {{\ensuremath{\mathcal C}\!{\mathit{lld}}(#1)}}
%{ {\mathcal C}\!\mathit{ll}{\mathcal O\!}\mathit{n}(#1)}

\newcommand{\Guards}[2]{{\mathcal G}\!\mathit{urds}( {#1}, {#2})}


\begin{definition}
$~ \ $

\begin{itemize}

\item
$M, \sigma \models \,     \callsOn {\re}\ \ \ \ \ \triangleq \ \  \  \exists x,y_0,\overline y,m.[\ \ \  \sigma.\prg{cont}\txteq x:=y_0.m(\overline y) \ \ \wedge\  \ \interpret {\sigma} {\re}\! \in\!  \{\, \interpret {\sigma} {y_0}, \overline{ \interpret {\sigma} {y}} \, \} \  \ ] $
 
   $~ \\ $

\item

$M  \models \,  \Guards {\re} {A}   \ \triangleq \ \ \  
  \  \forall \Mtwo, \sigma, \sigma'.[\ \ M, \sigma \models \,  (\extThis \wedge A) \ \ \wedge\ \ \sigma.\prg{cont}\neq \_; \_ \ \  \ \wedge $\\
$\strut \hspace{5.05cm}   \leadstoBoundedStarFin {\Mtwo\circ M} {\sigma} {\sigma'}\ \ \wedge \ \ M, \sigma' \models \,  
 \neg A   $\\
$\strut \hspace{5cm}  
   \Longrightarrow \  M, \sigma \models \,     \callsOn {\re} $
   $~ \\ $
    
\item
$M, \sigma \models \,  \insidef{\re}  \ \   \ \ \   \ \ \  \ \ \ \triangleq \ \ \   \ \forall \Mtwo, \sigma'. [
\ \ \ M, \sigma \models \,  \extThis \ \ \wedge\ \  \leadstoBoundedStar  {\Mtwo\circ M} {\sigma} {\sigma'}\ \ \wedge\ \ M, \sigma' \models \,  \extThis$\\
$\strut \hspace{4.6cm} \ \  \Longrightarrow\ \ M, \sigma' \not \models \,   \callsOn {\re}\ \ ] $

\end{itemize}


\end{definition}

The above definitions give us that if a capability $\re$ guards some assertion $A$, and $\re$ is never called in any state reachable from $\sigma$, then $A$ will never get invalidated:

\begin{lemma}
$~ $ \\
\label{lemma:insidef}
\begin{itemize}

\item
$M, \sigma \models \,  \insidef{\re} \ \ \wedge\ \ M, \sigma \models \  \insidef{\re} \ \wedge \  M, \sigma \models \  A \wedge \extThis \ \ \Longrightarrow $\\
$\strut \hspace{3.6cm}\forall \Mtwo,  \sigma'.[\ \   \leadstoBoundedStar  {\Mtwo\circ M} {\sigma} {\sigma'}\ \ \wedge\ \ M, \sigma' \models \,  \extThis  \ \  \Longrightarrow\ \ M, \sigma' \models\,  A \ \ ]$.
\end{itemize}
\end{lemma}

Proof by unfolding the definitions. 
 
 \vspace{.3cm}
 Lemma \ref{lemma:insidef} motivates that we want to find some criteria that guarantee that $M, \sigma \models \  \insidef{\re}$.
 An exact characterization of $ \insidef{\re}$ would be undecidable; we will, instead, overapproximate it.
 
\begin{definition}
$~ \ $

\begin{itemize}

\item
$M, \sigma \models \,  \inside{\re}  \ \   \ \ \   \ \ \  \ \ \ \triangleq \ \ \   \ \forall \Mtwo, \sigma'. [
\ \ \ M, \sigma \models \,  \extThis \ \ \wedge\ \  \leadstoBoundedStar  {\Mtwo\circ M} {\sigma} {\sigma'}\ \ \wedge\ \ M, \sigma' \models \,  \extThis$\\
$\strut \hspace{4.6cm} \ \  \Longrightarrow\ \ M, \sigma' \not \models \,   \callsOn {\re}\ \ ] $

\end{itemize}


\end{definition}
 
\end{document}
