%-----------------------------------------------------------------------------
%
%               Template for sigplanconf LaTeX Class
%
% Name:         sigplanconf-template.tex
%
% Purpose:      A template for sigplanconf.cls, which is a LaTeX 2e class
%               file for SIGPLAN conference proceedings.
%
% Guide:        Refer to "Author's Guide to the ACM SIGPLAN Class,"
%               sigplanconf-guide.pdf
%
% Author:       Paul C. Anagnostopoulos
%               Windfall Software
%               978 371-2316
%               paul@windfall.com
%
% Created:      15 February 2005
%
%-----------------------------------------------------------------------------
\documentclass[preprint,10pt]{sigplanconf}
% \documentclass[preprint,10pt,nocopyrightspace]{sigplanconf}
%KJX - for some reason, turning off preprint gives me an error!

% The following \documentclass options may be useful:

% preprint      Remove this option only once the paper is in final form.
% 10pt          To set in 10-point type instead of 9-point.
% 11pt          To set in 11-point type instead of 9-point.
% authoryear    To obtain author/year citation style instead of numeric.

\usepackage{graphicx}
\usepackage{amssymb} % mathtools,
\usepackage[reqno]{amsmath}
\usepackage{listings}
\usepackage{url}
\usepackage{enumitem}
\usepackage{grace}
\usepackage{balance}
\usepackage{hyperref}
\usepackage{lineno}



\special{papersize=8.5in,11in}
\setlength{\pdfpageheight}{\paperheight}
\setlength{\pdfpagewidth}{\paperwidth}

% \conferenceinfo{PLAS 2014}{6th July  2015, Prague, Czech Republic}
\copyrightyear{2015}
\copyrightdata{978-1-nnnn-nnnn-n/yy/mm}
\doi{nnnnnnn.nnnnnnn}

% Uncomment one of the following two, if you are not going for the
% traditional copyright transfer agreement.

%\exclusivelicense                % ACM gets exclusive license to publish,
                                  % you retain copyright

%\permissiontopublish             % ACM gets nonexclusive license to publish
                                  % (paid open-access papers,
                                  % short abstracts)

% \titlebanner{DRAFT:  }        % These are ignored unless
\preprintfooter{work in progress}   % 'preprint' option specified.

\authorinfo{Sophia Drossopoulou$^1$, James Noble$^{2,1}$, Toby Murray$^4$, Mark Miller$^3$}{$^1$Imperial College London, $^2$Victoria University Wellington, $^3$Google Inc, $^3$NICTA and UNSW.}{}

\usepackage{natbib}
\usepackage{bbm}
\usepackage{framed}
\usepackage{graphics}
\definecolor{shadecolor}{rgb}{1,0.8,0.3}
\usepackage{amsthm} % it conflicts with llncs
\usepackage{epsfig}
\usepackage{xspace}
%\usepackage{latexsym}
\usepackage{amssymb}
\usepackage{amsfonts}
%\usepackage{amstext}
% \usepackage{txfonts}
\usepackage{url}
%\usepackage{xypic}
%\usepackage{makeidx}  % allows for indexgeneration
\usepackage{listings} % for code
  \usepackage{multirow}
  \usepackage{qsymbols}
  \usepackage{amsmath}
% \usepackage{MnSymbol}


\newcommand{\prg}[1]{{\mbox{\tt{#1}}}}
\newcommand{\forget}[1]{}
\newcommand{\etc}{{\it etc.}}
\newcommand{\eg}{{\it e.g.\,}}
\newcommand{\ie}{{\it i.e.\,}}



\input{macros.tex}


\usepackage{times}
 \usepackage{latexsym}
\usepackage{listings}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}


\lstset{ %
  language=Java,                % the language of the code
  mathescape=true,
  basicstyle=\footnotesize\tt,           % the size of the fonts that are used for the code
  numbers=left,                   % where to put the line-numbers
  numberstyle=\tiny\color{dkgreen},  % the style that is used for the line-numbers
  stepnumber=1,                   % the step between two line-numbers. If it's 1, each line
                                  % will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{white},      % choose the background color. You must add \usepackage{color}
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  frame=single,                   % adds a frame around the code
  rulecolor=\color{black},        % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
  tabsize=2,                      % sets default tabsize to 2 spaces
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  title=\lstname,                   % show the filename of files included with \lstinputlisting;
                                  % also try caption instead of title
  keywordstyle=\color{blue},          % keyword style
  commentstyle=\color{gray},       % comment style
  stringstyle=\color{mauve},         % string literal style
  escapeinside={\%*}{*)},            % if you want to add LaTeX within your code
  morekeywords={module,obeys,satisfies,field,fields,predicate,private,public,final,this,throw,new,||,to,method,def,any,specification,policies,policy,then,where}               % if you want to add more keywords to the set
}




%  {\footnote{{\color{red}{Sophia removed the following:\ }}{#1}{\color{red}{Sophia's reason:\ }}{#2}}}


\usepackage{enumitem}
\setlist{nolistsep}

\newcommand{\definitionautorefname}{Definition}
\renewcommand{\theoremautorefname}{Theorem}
\newcommand{\lemmaautorefname}{Lemma}

\begin{document}





 \title{More Reasoning about Risk and Trust  in an Open Word\\
(Appendix)}

\maketitle



% \begin{abstract}
%   This is the appendix
% \end{abstract}

% \category{D.3.1}{Programming Languages}{Formal Definitions and Theory}
% \category{D.4.6}{Security and Protection}{Verification}
% \category{K.4.4}{Electronic Commerce}{Payment Schemes, Security}


\section{Introduction}

This is the companion appendix to our work \textit{``Reasoning about
  Risk and Trust in an Open World''}. We give here the full
definitions of \LangOO, \Chainmail, our Hoare logic, prove
soundness of our Hoare logic, and then prove that our escrow exchange
implementation establishes mutual trust while managing risk.

\footnote{Explain that we have made changes to model since  previous version.  Perhaps outline them? Perhaps
have new title.}

\paragraph{Status} There are lots of rough  edges. But what we want to concentrate on at the moment is the introduction of the oracles, $\O$, in order to give meaning to the $\obeys$ predicate, and to express the soundness of the Hoare logic.

On the other hand, some other (smaller) things are inconsistent, and will be updated once we are certain about the circularity issue. These include
\begin{enumerate}
\item How many specifications may a class declare to implement? Currently in some places it is one, it others it is many
\item Constructors -- do we allow constructors with bodies, and explicit pre- snf post- conditions in the specifications? We introduced them later in the day, and need to overhaul the oper semantics, $\Reach$ etc, or drop them altogether (ie no pre-post conditions in the Hoare logic).
\item The treatment of {\em unknown} as a possible interpretation and value of an expression, or an assertion. I think this does not pose problems, but I am not sure it is all consistent. Also, unsure whether we need the distinction between {\em unknown} and {\em undefined} -- bit SD thinks that we can make all this to work - after all similar problems appear in other systems (while the oracle-related issues are novel).
\item
How many parameters to a method or constructor? I now propose that we write the syntax with any number thereof, but already ope semantics onwards we require exactly one, and say this simplifies the exposition.
\item
Is it \prg{stmt} or \prg{stmts}?
\end{enumerate}

\paragraph{Status as of 14.10.2017} Some more changes need to be made.

\begin{enumerate}
\item Modules have to be stratified, and linking has to satitsfy the stratification.
\item We do not need the distinction between unknown and undefined. :-)
\item
SD thinks that in the formal system classes should satisfy one spec, and methods should have one parameter, and we can say in the text that the extension  is easy, and that the examples are allowed to use more than one.
\item
Is it \prg{stmt} or \prg{stmts}?
\end{enumerate}

\paragraph{High level explanations} Say that we deal with the impredicative nature of specification by only supporting the unfolding of definitions, and not the folding of them. 


\input{formal}
\input{SpecLanguage}
\input{MoreLinkingAndWellFormed}
\input{LinkingAndWellFormed}
\input{HoareLogic}

\input{Problems}
%
%\input{EscrowProof2}
%\input{PurseProof2}
%
%\cite{swapsiesGotGotNeed}


\setlength{\bibsep}{0.0pt}
\bibliographystyle{abbrv} % {plainnat}
\bibliography{Case}

\end{document}
% \input{remainders}



