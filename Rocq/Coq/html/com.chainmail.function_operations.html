<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">com.chainmail.function_operations</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.common.html#"><span class="id" title="library">common</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.loo_def.html#"><span class="id" title="library">loo_def</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.CpdtTactics.html#"><span class="id" title="library">CpdtTactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">Coq.Logic.FunctionalExtensionality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">notHyp</span> <span class="id" title="var">P</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id" title="var">_</span> : <span class="id" title="var">P</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" title="var">P1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> ?<span class="id" title="var">P2</span> =&gt; <span class="id" title="tactic">first</span> [ <span class="id" title="var">notHyp</span> <span class="id" title="var">P1</span> | <span class="id" title="var">notHyp</span> <span class="id" title="var">P2</span> | <span class="id" title="tactic">fail</span> 2 ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_exists_loo</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#config"><span class="id" title="definition">config</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> σ := <span class="id" title="tactic">fresh</span> "σ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [σ]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#frame"><span class="id" title="record">frame</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ϕ</span> := <span class="id" title="tactic">fresh</span> "ϕ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ϕ</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="com.chainmail.loo_def.html#frame"><span class="id" title="record">frame</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> ψ := <span class="id" title="tactic">fresh</span> "ψ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [ψ]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#stack"><span class="id" title="definition">stack</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> ψ := <span class="id" title="tactic">fresh</span> "ψ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [ψ]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#heap"><span class="id" title="definition">heap</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> χ := <span class="id" title="tactic">fresh</span> "χ" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [χ]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#stmt"><span class="id" title="inductive">stmt</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">s</span> := <span class="id" title="tactic">fresh</span> "s" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#continuation"><span class="id" title="inductive">continuation</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <span class="id" title="tactic">fresh</span> "c" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.common.html#var"><span class="id" title="inductive">var</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">vMap</span> := <span class="id" title="tactic">fresh</span> "β" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">vMap</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <span class="id" title="tactic">fresh</span> "f" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#mth"><span class="id" title="inductive">mth</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">m</span> := <span class="id" title="tactic">fresh</span> "m" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#fld"><span class="id" title="inductive">fld</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <span class="id" title="tactic">fresh</span> "f" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#gfld"><span class="id" title="inductive">gfld</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">g</span> := <span class="id" title="tactic">fresh</span> "g" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">g</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#cls"><span class="id" title="inductive">cls</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">C</span> := <span class="id" title="tactic">fresh</span> "C" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">C</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#addr"><span class="id" title="inductive">addr</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">α</span> := <span class="id" title="tactic">fresh</span> "α" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">α</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#value"><span class="id" title="inductive">value</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="tactic">fresh</span> "v" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#obj"><span class="id" title="record">obj</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">o</span> := <span class="id" title="tactic">fresh</span> "o" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">o</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span> : <a class="idref" href="com.chainmail.loo_def.html#mdl"><span class="id" title="definition">mdl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">M</span> := <span class="id" title="tactic">fresh</span> "M" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">M</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_exists</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">eq_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Heqb</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">a</span>]|- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">a</span>]] =&gt; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a>; <span class="id" title="tactic">auto</span><br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Heq</span> : ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a2</span>, <span class="id" title="var">Heqb</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a1</span> ?<span class="id" title="var">a2</span>]|- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Heq</span> : ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a2</span>, <span class="id" title="var">Heqb</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a2</span> ?<span class="id" title="var">a1</span>]|- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_sym"><span class="id" title="method">eqb_sym</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqb</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Heq</span> : ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a2</span> |- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a1</span> ?<span class="id" title="var">a2</span>]] =&gt; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Heq</span> : ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a2</span> |- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a2</span> ?<span class="id" title="var">a1</span>]] =&gt; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_sym"><span class="id" title="method">eqb_sym</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a>; <span class="id" title="tactic">auto</span><br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a1</span> ?<span class="id" title="var">a2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hnew</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnew</span> : <span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">eapply</span> <a class="idref" href="com.chainmail.common.html#eqb_eqp"><span class="id" title="method">eqb_eqp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>|<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> ?<span class="id" title="var">a1</span> ?<span class="id" title="var">a2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hnew</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hnew</span> : <span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">eapply</span> <a class="idref" href="com.chainmail.common.html#eqb_neq"><span class="id" title="method">eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>|<span class="id" title="tactic">auto</span>]<br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">a2</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">crush</span>|<span class="id" title="tactic">auto</span>]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">map_rewrite</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">σ</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">σ</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">σ</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">σ</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">_map</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">ψ</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">ψ</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">ψ</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">ψ</span></a><a class="idref" href="com.chainmail.loo_def.html#f5aff4b8b39be7853024759c46b23ee5"><span class="id" title="definition">_map</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#configMapStack"><span class="id" title="instance">configMapStack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapStack"><span class="id" title="instance">configMapStack</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#configMapStack"><span class="id" title="instance">configMapStack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapStack"><span class="id" title="instance">configMapStack</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#configMapHeap"><span class="id" title="instance">configMapHeap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapHeap"><span class="id" title="instance">configMapHeap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#configMapHeap"><span class="id" title="instance">configMapHeap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapHeap"><span class="id" title="instance">configMapHeap</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#stackMap"><span class="id" title="instance">stackMap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#stackMap"><span class="id" title="instance">stackMap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#stackMap"><span class="id" title="instance">stackMap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#stackMap"><span class="id" title="instance">stackMap</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a>] |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">empty_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>, <a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span> [<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>, <a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a>; <span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">update_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a'</span>, <span class="id" title="var">H</span> : (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a</span>, <span class="id" title="var">H</span> : (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Heq</span> := <span class="id" title="tactic">fresh</span> "Heq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hneq</span> := <span class="id" title="tactic">fresh</span> "Hneq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>]<br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a</span>]  |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a'</span>, <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span>]  |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a</span>, <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span>]  |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span>]  |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Heq</span> := <span class="id" title="tactic">fresh</span> "Heq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hneq</span> := <span class="id" title="tactic">fresh</span> "Hneq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;| [|- (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a'</span> |- (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a</span> |- (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;| [|- (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Heq</span> := <span class="id" title="tactic">fresh</span> "Heq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hneq</span> := <span class="id" title="tactic">fresh</span> "Hneq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a'</span> |- <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">a</span> |- <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[(<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">a'</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a>, <a class="idref" href="com.chainmail.common.html#t_update"><span class="id" title="definition">t_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Heq</span> := <span class="id" title="tactic">fresh</span> "Heq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hneq</span> := <span class="id" title="tactic">fresh</span> "Hneq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#eqb_refl"><span class="id" title="method">eqb_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hneq</span>]<br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="var">_</span>]|-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>, <a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>, <a class="idref" href="com.chainmail.common.html#t_empty"><span class="id" title="definition">t_empty</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pmap_simpl</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">try</span> <span class="id" title="var">empty_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">update_auto</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="one_to_one"><span class="id" title="definition">one_to_one</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">b</span>, <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a2"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#a2"><span class="id" title="variable">a2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Program Instance</span> <a name="optionEq"><span class="id" title="instance">optionEq</span></a> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span> := <span class="id" title="keyword">match</span> <a class="idref" href="com.chainmail.function_operations.html#o1"><span class="id" title="variable">o1</span></a>, <a class="idref" href="com.chainmail.function_operations.html#o2"><span class="id" title="variable">o2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b1</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b2</span> =&gt; <a class="idref" href="com.chainmail.common.html#eqb"><span class="id" title="method">eqb</span></a> <span class="id" title="var">b1</span> <span class="id" title="var">b2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a2</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">eq_db</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a2</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">eq_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">crush</span>].<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a2</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">eq_auto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">crush</span>].<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a2</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">crush</span>].<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a2</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">crush</span>].<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a2</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Heq</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">left</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>|<span class="id" title="tactic">right</span>; <span class="id" title="var">crush</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">right</span>; <span class="id" title="var">crush</span>].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} <span class="id" title="var">a</span> (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">m</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span>|]; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>|]; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="not_some_implies_none"><span class="id" title="lemma">not_some_implies_none</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">b</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">f</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_exists_loo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="not_none_implies_some"><span class="id" title="lemma">not_none_implies_some</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}(<span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">f</span>); <span class="id" title="tactic">auto</span>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Rewrite</span> <a class="idref" href="com.chainmail.function_operations.html#not_none_implies_some"><span class="id" title="lemma">not_none_implies_some</span></a> : <span class="id" title="var">map_db</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">not_none_implies_some</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="in_map_implies_in_dom"><span class="id" title="lemma">in_map_implies_in_dom</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClass</span> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">pmap_simpl</span>; <span class="id" title="var">crush</span>; <span class="id" title="tactic">eauto</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="in_dom_implies_in_map"><span class="id" title="lemma">in_dom_implies_in_map</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="not_in_map_implies_not_in_dom"><span class="id" title="lemma">not_in_map_implies_not_in_dom</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hin</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hmap</span> : ?<span class="id" title="var">m</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a'</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="com.chainmail.function_operations.html#a'"><span class="id" title="variable">a'</span></a> ?<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">m</span> <a class="idref" href="com.chainmail.function_operations.html#a'"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_exists_loo</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="not_in_dom_implies_not_in_map"><span class="id" title="lemma">not_in_dom_implies_not_in_map</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#not_some_implies_none"><span class="id" title="lemma">not_some_implies_none</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="com.chainmail.function_operations.html#in_map_implies_in_dom"><span class="id" title="lemma">in_map_implies_in_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exists_dom_finite"><span class="id" title="lemma">exists_dom_finite</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#finite"><span class="id" title="inductive">finite</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClass</span> <span class="id" title="var">m</span> <span class="id" title="var">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">split</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHfinite</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">d</span> <span class="id" title="var">Hdom</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#excluded_middle"><span class="id" title="axiom">excluded_middle</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">a</span> <span class="id" title="var">d</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span>|<span class="id" title="var">Hnin</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>|<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a><span class="id" title="var">d</span>)];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eq_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eq_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#in_eq"><span class="id" title="lemma">in_eq</span></a>|<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#in_cons"><span class="id" title="lemma">in_cons</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H1</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> ?<span class="id" title="var">a0</span> (?<span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a>?<span class="id" title="var">d</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">d</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">eq_auto</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eq_auto</span>; [<span class="id" title="var">crush</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="update_neq_empty"><span class="id" title="lemma">update_neq_empty</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>)(<span class="id" title="var">b</span> : <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Heq</span> : <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">m</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcontra</span>; <span class="id" title="var">pmap_simpl</span>|<span class="id" title="var">pmap_simpl</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">update_empty_contra</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span> ?<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">contradiction</span> (<a class="idref" href="com.chainmail.function_operations.html#update_neq_empty"><span class="id" title="lemma">update_neq_empty</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">m</span>)<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span> ?<span class="id" title="var">m</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">contradiction</span> (<a class="idref" href="com.chainmail.function_operations.html#update_neq_empty"><span class="id" title="lemma">update_neq_empty</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">m</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="dom_empty_is_nil"><span class="id" title="lemma">dom_empty_is_nil</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClass</span> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">d'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">b</span> : <span class="id" title="var">B</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <span class="id" title="var">Ha0</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#in_eq"><span class="id" title="lemma">in_eq</span></a>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_exists_loo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">finite_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">σ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">σ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">ψ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">ψ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#8163b748e921982fd6680eb842e155bc"><span class="id" title="definition">finite_ϕ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#8163b748e921982fd6680eb842e155bc"><span class="id" title="definition">finite_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">σ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#eef4279079e636baab7c87f7a243ecd6"><span class="id" title="definition">σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">ψ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">finite_</span></a><a class="idref" href="com.chainmail.loo_def.html#39017641f42b26cb4270528f404371a3"><span class="id" title="definition">ψ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#8163b748e921982fd6680eb842e155bc"><span class="id" title="definition">finite_ϕ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#8163b748e921982fd6680eb842e155bc"><span class="id" title="definition">finite_ϕ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">not_stuck_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">not_stuck_</span></a><a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">σ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">not_stuck_</span></a><a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">σ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#e1c63a1473ff0d25690245c3e319d1d3"><span class="id" title="definition">not_stuck_ϕ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#e1c63a1473ff0d25690245c3e319d1d3"><span class="id" title="definition">not_stuck_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">not_stuck_</span></a><a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">σ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">not_stuck_</span></a><a class="idref" href="com.chainmail.loo_def.html#8d83d33ce13bb36909836d90a1b92acb"><span class="id" title="definition">σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#e1c63a1473ff0d25690245c3e319d1d3"><span class="id" title="definition">not_stuck_ϕ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#e1c63a1473ff0d25690245c3e319d1d3"><span class="id" title="definition">not_stuck_ϕ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">waiting_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">σ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">σ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">ψ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">ψ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#f289271001a91604d20728e2bc9bbf81"><span class="id" title="definition">waiting_ϕ</span></a> <span class="id" title="var">_</span>] |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#f289271001a91604d20728e2bc9bbf81"><span class="id" title="definition">waiting_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">σ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#c9210538bfe99c9b406717383aeaaf92"><span class="id" title="definition">σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">ψ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">waiting_</span></a><a class="idref" href="com.chainmail.loo_def.html#348d3669779018d9f34a2e1ffc83bfe1"><span class="id" title="definition">ψ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id" title="keyword">context</span>[<a class="idref" href="com.chainmail.loo_def.html#f289271001a91604d20728e2bc9bbf81"><span class="id" title="definition">waiting_ϕ</span></a> <span class="id" title="var">_</span>]] =&gt; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#f289271001a91604d20728e2bc9bbf81"><span class="id" title="definition">waiting_ϕ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="dom_unique"><span class="id" title="lemma">dom_unique</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#unique"><span class="id" title="inductive">unique</span></a> <a class="idref" href="com.chainmail.function_operations.html#d"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClass</span> <span class="id" title="var">m</span> <span class="id" title="var">d</span> <span class="id" title="var">Hdom</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#dom"><span class="id" title="definition">dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="norm_empty"><span class="id" title="constructor">norm_empty</span></a> : <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a><br/>
| <a name="norm_update"><span class="id" title="constructor">norm_update</span></a> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">m</span>, <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compose_normal_form"><span class="id" title="lemma">compose_normal_form</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">m1</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">m2</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">m3</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m3"><span class="id" title="variable">m3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="com.chainmail.function_operations.html#m3"><span class="id" title="variable">m3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#m2"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClassA</span> <span class="id" title="var">HeqClassB</span> <span class="id" title="var">m1</span> <span class="id" title="var">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHnorm</span> <span class="id" title="var">C</span> <span class="id" title="var">m2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">m3</span> <span class="id" title="var">IH</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IH1</span> <span class="id" title="var">IH2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">b</span> <span class="id" title="var">m2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">HSome</span>|<span class="id" title="var">HNone</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">destruct</span> <span class="id" title="var">HSome</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c</span> <span class="id" title="var">HSome</span>]|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">a</span> <span class="id" title="var">c</span> <span class="id" title="var">m3</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#norm_update"><span class="id" title="constructor">norm_update</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">m3</span>; [<span class="id" title="tactic">auto</span>|<span class="id" title="var">crush</span>]|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmap_simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="update_finite_normal_form"><span class="id" title="lemma">update_finite_normal_form</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">m'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m'"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="com.chainmail.function_operations.html#m'"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClass</span> <span class="id" title="var">m</span> <span class="id" title="var">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">exists</span> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>|].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHfinite</span> <span class="id" title="var">a0</span> <span class="id" title="var">b0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">m'</span> <span class="id" title="var">Hnorm</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnorm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnorm</span> <span class="id" title="var">Heqm'</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a0</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">subst</span> <span class="id" title="var">a0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">m'</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmap_simpl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">m'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">m'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">HSome</span>|<span class="id" title="var">HNone</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">destruct</span> <span class="id" title="var">HSome</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b'</span> <span class="id" title="var">HSome</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="var">pmap_simpl</span>; <span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#norm_update"><span class="id" title="constructor">norm_update</span></a>; <span class="id" title="tactic">auto</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span>; <span class="id" title="var">pmap_simpl</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.common.html#neq_eqb"><span class="id" title="method">neq_eqb</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">a0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqa'</span>|<span class="id" title="var">Hneqa'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">subst</span>; <span class="id" title="var">pmap_simpl</span>|<span class="id" title="var">pmap_simpl</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="finite_exists_normal_form"><span class="id" title="lemma">finite_exists_normal_form</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#finite"><span class="id" title="inductive">finite</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">m'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m'"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="com.chainmail.function_operations.html#m'"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClass</span> <span class="id" title="var">m</span> <span class="id" title="var">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfinite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">exists</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>|].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#update_finite_normal_form"><span class="id" title="lemma">update_finite_normal_form</span></a>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="finite_normal_form_implies_finite"><span class="id" title="lemma">finite_normal_form_implies_finite</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#finite"><span class="id" title="inductive">finite</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqClass</span> <span class="id" title="var">m</span> <span class="id" title="var">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hnorm</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="finite_implies_normal_form"><span class="id" title="lemma">finite_implies_normal_form</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#finite"><span class="id" title="inductive">finite</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#finite_exists_normal_form"><span class="id" title="lemma">finite_exists_normal_form</span></a> <span class="id" title="var">m</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">finite_implies_normal_form</span> <span class="id" title="var">finite_exists_normal_form</span> <span class="id" title="var">finite_normal_form_implies_finite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compose_normal_form</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="finite_map_composition"><span class="id" title="lemma">finite_map_composition</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">m1</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#finite"><span class="id" title="inductive">finite</span></a> <a class="idref" href="com.chainmail.function_operations.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">m2</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#finite"><span class="id" title="inductive">finite</span></a> (<a class="idref" href="com.chainmail.function_operations.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#m2"><span class="id" title="variable">m2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#compose_normal_form"><span class="id" title="lemma">compose_normal_form</span></a> <span class="id" title="var">m1</span> (<a class="idref" href="com.chainmail.function_operations.html#finite_implies_normal_form"><span class="id" title="lemma">finite_implies_normal_form</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">H1</span>) <span class="id" title="var">m2</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form_implies_finite"><span class="id" title="lemma">finite_normal_form_implies_finite</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="one_to_one_f_nequal"><span class="id" title="lemma">one_to_one_f_nequal</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>, <a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="com.chainmail.function_operations.html#a2"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a2"><span class="id" title="variable">a2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">H</span> <span class="id" title="var">f</span> <span class="id" title="var">H1t1</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hex</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsome1</span>|<span class="id" title="var">Hnone1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">destruct_exists_loo</span>|].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a2</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsome2</span>|<span class="id" title="var">Hnone2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">destruct_exists_loo</span>|<span class="id" title="var">crush</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcontra</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1t1</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H1t1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<span class="id" title="var">x0</span>)|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a2</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsome2</span>|<span class="id" title="var">Hnone2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">crush</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_exists</span>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="bind_compose_application"><span class="id" title="lemma">bind_compose_application</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#f2"><span class="id" title="variable">f2</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#4bfb4f2d0721ba668e3a802ab1b745a1"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> (<a class="idref" href="com.chainmail.function_operations.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> (<a class="idref" href="com.chainmail.function_operations.html#f2"><span class="id" title="variable">f2</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">f1</span> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> ?<span class="id" title="var">g</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">f2</span> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> ?<span class="id" title="var">g</span> |- <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> (?<span class="id" title="var">f1</span> ?<span class="id" title="var">a</span>) ?<span class="id" title="var">g</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> (?<span class="id" title="var">f2</span> ?<span class="id" title="var">a</span>) ?<span class="id" title="var">g</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#equal_f"><span class="id" title="lemma">equal_f</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:=<span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">bind_compose_application</span> : <span class="id" title="var">map_db</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> <a class="idref" href="com.chainmail.function_operations.html#bind_compose_application"><span class="id" title="lemma">bind_compose_application</span></a> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="one_to_one_bind_f_nequal"><span class="id" title="lemma">one_to_one_bind_f_nequal</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>, <a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="com.chainmail.function_operations.html#a2"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">b</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> <a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> <a class="idref" href="com.chainmail.function_operations.html#a1"><span class="id" title="variable">a1</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> <a class="idref" href="com.chainmail.function_operations.html#a2"><span class="id" title="variable">a2</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">H</span> <span class="id" title="var">f</span> <span class="id" title="var">H1t1</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hex</span> <span class="id" title="var">Hcontra</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a2</span>); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_exists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">contradiction</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">H1t1</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">a1</span>:=<span class="id" title="var">a</span>)(<span class="id" title="var">a2</span>:=<span class="id" title="var">a0</span>); <span class="id" title="tactic">eauto</span>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">maps_into_from_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">Hex</span> : <span class="id" title="var">g</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <a class="idref" href="com.chainmail.common.html#maps_from"><span class="id" title="definition">maps_from</span></a> ?<span class="id" title="var">g</span> ?<span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">g</span> ?<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">c</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">Hex</span> : <span class="id" title="var">f</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>); <span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">eq_explode</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Heq</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> ?<span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a1</span> : ?<span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a2</span> : ?<span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<span class="id" title="var">a2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">a1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hneq</span> := <span class="id" title="tactic">fresh</span> "Hneq" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hneq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">option_crush</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">crush</span><br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">x</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">crush</span><br/>
<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">auto_specialize</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">P</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> ?<span class="id" title="var">Q</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H'</span> : ?<span class="id" title="var">P</span> |- <span class="id" title="var">_</span> ] =&gt; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">H'</span>)<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : ?<span class="id" title="var">P</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">P</span> |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ha</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#or_introl"><span class="id" title="constructor">or_introl</span></a> <span class="id" title="var">Hb</span>))<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> ?<span class="id" title="var">P</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">P</span> |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ha</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#or_intror"><span class="id" title="constructor">or_intror</span></a> <span class="id" title="var">Hb</span>))<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : ?<span class="id" title="var">P</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> ?<span class="id" title="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hc</span> : ?<span class="id" title="var">Q</span> |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ha</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="inv"><span class="id" title="definition">inv</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inv_empty"><span class="id" title="lemma">inv_empty</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span>{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}{<span class="id" title="var">HeqA</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}{<span class="id" title="var">HeqB</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqA"><span class="id" title="variable">HeqA</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqB"><span class="id" title="variable">HeqB</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">inv_empty</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inv_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hinv</span> : <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">f'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<span class="id" title="var">f'</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">f'</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinv</span>; <span class="id" title="var">andDestruct</span>; <span class="id" title="var">crush</span>|]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Hinv</span> : <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">f'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> : ?<span class="id" title="var">f'</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinv</span>; <span class="id" title="var">andDestruct</span>; <span class="id" title="var">crush</span>|]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inv_one_to_one_1"><span class="id" title="lemma">inv_one_to_one_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">HeqB</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">Hinv</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">option_crush</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inv_one_to_one_2"><span class="id" title="lemma">inv_one_to_one_2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">HeqB</span> <span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">Hinv</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, ?<span class="id" title="var">f'</span> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> ?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Ha</span> : ?<span class="id" title="var">f'</span> ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">f'</span> ?<span class="id" title="var">a2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> |-<span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hb</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ha</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="one_to_one_empty"><span class="id" title="lemma">one_to_one_empty</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}{<span class="id" title="var">Heq</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#Heq"><span class="id" title="variable">Heq</span></a> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">one_to_one_empty</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="one_to_one_fnf_update"><span class="id" title="lemma">one_to_one_fnf_update</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">f</span> <span class="id" title="var">Hfin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_explode</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">option_crush</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span>) |- ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">a2</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<span class="id" title="var">b'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> <span class="id" title="keyword">else</span> <span class="id" title="var">_</span>) |- ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">a2</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<span class="id" title="var">b'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <span class="id" title="var">_</span> <span class="id" title="keyword">then</span> <span class="id" title="var">_</span> <span class="id" title="keyword">else</span> ?<span class="id" title="var">m</span> <a class="idref" href="com.chainmail.function_operations.html#x"><span class="id" title="variable">x</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Ha</span> : ?<span class="id" title="var">m</span> ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">m</span> ?<span class="id" title="var">a2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> |- ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">a2</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b1</span>:=<span class="id" title="var">b'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inv_update"><span class="id" title="lemma">inv_update</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>) (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_explode</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">option_crush</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>

<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="one_to_one_update_none"><span class="id" title="lemma">one_to_one_update_none</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a'</span>, <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a'"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.function_operations.html#a'"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">HeqB</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">Hone2one</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hmap</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="var">eq_explode</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hone2one</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b0</span>:=<span class="id" title="var">b</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">eq_auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">one_to_one_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> ?<span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Ha</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Htmp</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Htmp</span> : <span class="id" title="var">a1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> (<span class="id" title="var">H</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">b</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Hb</span>)|<span class="id" title="tactic">subst</span> <span class="id" title="var">a1</span>]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> ?<span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span> ?<span class="id" title="var">f</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hc</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <span class="id" title="var">f</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <span class="id" title="var">f</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one_fnf_update"><span class="id" title="lemma">one_to_one_fnf_update</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">auto</span>|]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="one_to_one_exists_inv_fnf"><span class="id" title="lemma">one_to_one_exists_inv_fnf</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">f'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">Heqb</span> <span class="id" title="var">f</span> <span class="id" title="var">Hfin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="var">one_to_one_auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">auto_specialize</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_exists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#inv_update"><span class="id" title="lemma">inv_update</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">a'</span>, <span class="id" title="var">m</span> <a class="idref" href="com.chainmail.function_operations.html#a'"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.function_operations.html#a'"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one_update_none"><span class="id" title="lemma">one_to_one_update_none</span></a>; <span class="id" title="tactic">auto</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#not_some_implies_none"><span class="id" title="lemma">not_some_implies_none</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">_</span> : ?<span class="id" title="var">m</span> ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a''</span>, ?<span class="id" title="var">m</span> <a class="idref" href="com.chainmail.function_operations.html#a''"><span class="id" title="variable">a''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.function_operations.html#a''"><span class="id" title="variable">a''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">a</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">auto</span>|<span class="id" title="tactic">subst</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">option_crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="one_to_one_exists_inv_fin"><span class="id" title="lemma">one_to_one_exists_inv_fin</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#finite"><span class="id" title="inductive">finite</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">f'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one_exists_inv_fnf"><span class="id" title="lemma">one_to_one_exists_inv_fnf</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Parameter</span> <a name="one_to_one_exists_inv"><span class="id" title="axiom">one_to_one_exists_inv</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">f'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inv_symmetry"><span class="id" title="lemma">inv_symmetry</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inverse_maps_into"><span class="id" title="lemma">inverse_maps_into</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, ?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> ?<span class="id" title="var">f'</span> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> |- <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">f'</span> ?<span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#c"><span class="id" title="variable">c</span></a> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inverse_maps_from"><span class="id" title="lemma">inverse_maps_from</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_from"><span class="id" title="definition">maps_from</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">andDestruct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#maps_from"><span class="id" title="definition">maps_from</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, ?<span class="id" title="var">f'</span> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> ?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">f'</span> ?<span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">c'</span> |- <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b'</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">inverse_maps_from</span> <span class="id" title="var">inverse_maps_into</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inverse_compose_right"><span class="id" title="lemma">inverse_compose_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>}(<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>)(<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">m</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hnone</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">destruct_exists</span>|<span class="id" title="var">crush</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">maps_into_from_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inverse_compose_left"><span class="id" title="lemma">inverse_compose_left</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">m</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>)(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">f'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_from"><span class="id" title="definition">maps_from</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#f'"><span class="id" title="variable">f'</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hnone</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">destruct_exists</span>|<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnone</span>].<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="var">maps_into_from_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">inv_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#not_some_implies_none"><span class="id" title="lemma">not_some_implies_none</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">maps_into_from_auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compose_assoc"><span class="id" title="lemma">compose_assoc</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>)(<span class="id" title="var">h</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="com.chainmail.function_operations.html#D"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a><a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a><a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">HeqA</span> <span class="id" title="var">HeqB</span> <span class="id" title="var">HeqC</span>  <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*Lemma&nbsp;bind_inverse_right&nbsp;:<br/>
&nbsp;&nbsp;forall&nbsp;{A&nbsp;B&nbsp;C&nbsp;:&nbsp;Type}`{Eq&nbsp;A}`{Eq&nbsp;B}`{Eq&nbsp;C}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(f&nbsp;:&nbsp;partial_map&nbsp;B&nbsp;C)(f'&nbsp;:&nbsp;partial_map&nbsp;C&nbsp;B),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;f&nbsp;f'&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;forall&nbsp;(m&nbsp;:&nbsp;partial_map&nbsp;A&nbsp;B),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(forall&nbsp;a&nbsp;b,&nbsp;m&nbsp;a&nbsp;=&nbsp;Some&nbsp;b&nbsp;-&gt;&nbsp;exists&nbsp;c,&nbsp;f&nbsp;b&nbsp;=&nbsp;Some&nbsp;c)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;x&nbsp;=&gt;&nbsp;bind&nbsp;(bind&nbsp;(m&nbsp;x)&nbsp;f)&nbsp;f')&nbsp;=&nbsp;m.<br/>
Proof.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;unfold&nbsp;bind;&nbsp;simpl.<br/>
&nbsp;&nbsp;apply&nbsp;functional_extensionality;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;a.<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;<span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode">?<span class="id" title="var">a</span></span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(partial_map_dec&nbsp;a&nbsp;m)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hsome</span>|<span class="id" title="var">Hnone</span></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">destruct_exists</span>|<span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">Hnone</span>;</span> <span class="inlinecode"><span class="id" title="tactic">auto</span></span><br/>
&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;<span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode">?<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode">?<span class="id" title="var">b</span>,</span>
         <span class="inlinecode"><span class="id" title="var">Hmap</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">b'</span>,</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode"><span class="id" title="var">b'</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode">?<span class="id" title="var">a</span></span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;H;&nbsp;apply&nbsp;Hmap&nbsp;in&nbsp;H;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct_exists<br/>
&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;unfold&nbsp;inv&nbsp;in&nbsp;*;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;andDestruct.<br/>
&nbsp;&nbsp;crush.<br/>
Qed.<br/>
<br/>
Lemma&nbsp;bind_inverse_left&nbsp;:<br/>
&nbsp;&nbsp;forall&nbsp;{A&nbsp;B&nbsp;C&nbsp;:&nbsp;Type}`{Eq&nbsp;A}`{Eq&nbsp;B}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(f&nbsp;:&nbsp;partial_map&nbsp;A&nbsp;B)(f'&nbsp;:&nbsp;partial_map&nbsp;B&nbsp;A),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inv&nbsp;f&nbsp;f'&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;forall&nbsp;(m&nbsp;:&nbsp;partial_map&nbsp;B&nbsp;C),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(forall&nbsp;a&nbsp;b,&nbsp;f&nbsp;a&nbsp;=&nbsp;Some&nbsp;b&nbsp;-&gt;&nbsp;exists&nbsp;c,&nbsp;m&nbsp;b&nbsp;=&nbsp;Some&nbsp;c)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(forall&nbsp;b&nbsp;c,&nbsp;m&nbsp;b&nbsp;=&nbsp;Some&nbsp;c&nbsp;-&gt;&nbsp;exists&nbsp;a,&nbsp;f&nbsp;a&nbsp;=&nbsp;Some&nbsp;b)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;x&nbsp;&nbsp;=&gt;&nbsp;bind&nbsp;(f'&nbsp;x)&nbsp;(fun&nbsp;y&nbsp;=&gt;&nbsp;bind&nbsp;(f&nbsp;y)&nbsp;m))&nbsp;=&nbsp;m.<br/>
Proof.<br/>
&nbsp;&nbsp;intros.<br/>
&nbsp;&nbsp;unfold&nbsp;bind;&nbsp;simpl.<br/>
&nbsp;&nbsp;apply&nbsp;functional_extensionality;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;b.<br/>
&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;|&nbsp;<span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">inv</span></span> <span class="inlinecode">?<span class="id" title="var">f</span></span> <span class="inlinecode">?<span class="id" title="var">f'</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="keyword">context</span>[?<span class="id" title="var">f'</span></span> <span class="inlinecode">?<span class="id" title="var">b</span>]</span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(partial_map_dec&nbsp;b&nbsp;f')&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hsome</span>|<span class="id" title="var">Hnone</span></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">destruct_exists</span>|<span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">Hnone</span>;</span> <span class="inlinecode"><span class="id" title="tactic">auto</span></span><br/>
&nbsp;&nbsp;end.<br/>
<br/>
&nbsp;&nbsp;-&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">f'</span></span> <span class="inlinecode">?<span class="id" title="var">b</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode">?<span class="id" title="var">a</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="keyword">context</span>[?<span class="id" title="var">f'</span></span> <span class="inlinecode">?<span class="id" title="var">b</span>]</span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;H<br/>
&nbsp;&nbsp;&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;inv&nbsp;in&nbsp;*;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;andDestruct.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<span class="inlinecode"><span class="id" title="var">Hmap</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">f'</span></span> <span class="inlinecode">?<span class="id" title="var">b</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode">?<span class="id" title="var">a</span>,</span>
              <span class="inlinecode"><span class="id" title="var">Ha</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">b'</span>,</span> <span class="inlinecode">?<span class="id" title="var">f'</span></span> <span class="inlinecode"><span class="id" title="var">b'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"></span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Ha&nbsp;in&nbsp;Hmap<br/>
&nbsp;&nbsp;&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/>
<br/>
&nbsp;&nbsp;-&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">None</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode">?<span class="id" title="var">b</span></span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(partial_map_dec&nbsp;b&nbsp;m)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hsome'</span>|<span class="id" title="var">Hnone'</span></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto<br/>
&nbsp;&nbsp;&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;destruct_exists.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode">?<span class="id" title="var">b</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode"><span class="id" title="var">_</span>,</span>
           <span class="inlinecode"><span class="id" title="var">Ha</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">b'</span></span> <span class="inlinecode"><span class="id" title="var">c'</span>,</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode"><span class="id" title="var">b'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode"><span class="id" title="var">c'</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">m</span></span> <span class="inlinecode">?<span class="id" title="var">b</span></span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Ha&nbsp;in&nbsp;H;&nbsp;destruct_exists<br/>
&nbsp;&nbsp;&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;inv&nbsp;in&nbsp;*;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;andDestruct.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;match&nbsp;goal&nbsp;with<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">f</span></span> <span class="inlinecode">?<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode">?<span class="id" title="var">b</span>,</span>
           <span class="inlinecode"><span class="id" title="var">Ha</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">f'</span></span> <span class="inlinecode">?<span class="id" title="var">b</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">None</span>,</span>
           <span class="inlinecode"><span class="id" title="var">Hb</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode"><span class="id" title="var">b'</span>,</span> <span class="inlinecode">?<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode"><span class="id" title="var">b'</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode">?<span class="id" title="var">f'</span></span> <span class="inlinecode"><span class="id" title="var">b'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode"><span class="id" title="var">a'</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span>&nbsp;=&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Hb&nbsp;in&nbsp;H<br/>
&nbsp;&nbsp;&nbsp;&nbsp;end.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/>
Qed.*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compose_one_to_one_eq"><span class="id" title="lemma">compose_one_to_one_eq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>: <span class="id" title="keyword">Type</span>} `{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) (<span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#f2"><span class="id" title="variable">f2</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#f2"><span class="id" title="variable">f2</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f1"><span class="id" title="variable">f1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.function_operations.html#f2"><span class="id" title="variable">f2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">m1</span> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> ?<span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">m2</span> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> ?<span class="id" title="var">f</span> |- ?<span class="id" title="var">m1</span> ?<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">m2</span> ?<span class="id" title="var">y</span> ] =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#equal_f"><span class="id" title="lemma">equal_f</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span>:=<span class="id" title="var">y</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [|- ?<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">m</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.common.html#eq_dec"><span class="id" title="method">eq_dec</span></a> <span class="id" title="var">n</span> <span class="id" title="var">m</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> ?<span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hneq</span> : ?<span class="id" title="var">f1</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> ?<span class="id" title="var">f2</span> ?<span class="id" title="var">a</span> |- ?<span class="id" title="var">f1</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">f2</span> ?<span class="id" title="var">a</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.function_operations.html#one_to_one_bind_f_nequal"><span class="id" title="lemma">one_to_one_bind_f_nequal</span></a> <span class="id" title="var">g</span> <span class="id" title="var">H</span> (<span class="id" title="var">f1</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f2</span> <span class="id" title="var">a</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f1</span> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f2</span> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">eq_db</span>|]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">f1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsome1</span>|<span class="id" title="var">Hnone1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">destruct_exists</span>|<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnone1</span> <span class="id" title="tactic">in</span> *].<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">x</span> |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">f2</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsome2</span>|<span class="id" title="var">Hnone2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">destruct_exists</span>|<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">x</span> |-<span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">maps_into_from_auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">g</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ?<span class="id" title="var">g</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">g</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">one_to_one_auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hneq</span> : <span class="id" title="var">f2</span> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a0a5068f83a704fcfbda8cd473a6cfea"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">crush</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#not_none_implies_some"><span class="id" title="lemma">not_none_implies_some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_exists</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">maps_into_from_auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compose_one_to_one"><span class="id" title="lemma">compose_one_to_one</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> (<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a1</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsome1</span>|<span class="id" title="var">Hnone1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a2</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsome2</span>|<span class="id" title="var">Hnone2</span>];    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnone1</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnone2</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destruct_exists</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">one_to_one_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="extend_some_1"><span class="id" title="lemma">extend_some_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#extend"><span class="id" title="definition">extend</span></a>; <span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="extend_application"><span class="id" title="lemma">extend_application</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#extend"><span class="id" title="definition">extend</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;:&nbsp;need&nbsp;to&nbsp;figure&nbsp;this&nbsp;out&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;specialize&nbsp;universal&nbsp;quantification&nbsp;for&nbsp;all&nbsp;possible&nbsp;terms&nbsp;*)</span><br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">broken</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">_</span> : ?<span class="id" title="var">A</span>), <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> : ?<span class="id" title="var">A</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H'</span> := <span class="id" title="var">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="disjoint_dom_symmetry"><span class="id" title="lemma">disjoint_dom_symmetry</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#not_some_implies_none"><span class="id" title="lemma">not_some_implies_none</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b'</span> <span class="id" title="var">Hcontra</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">a</span> <span class="id" title="var">b'</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">auto_specialize</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">disjoint_dom_symmetry</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">disjoint_dom_sym_auto</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">g</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">notHyp</span> (<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <span class="id" title="var">g</span> <span class="id" title="var">f</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <span class="id" title="var">g</span> <span class="id" title="var">f</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#disjoint_dom_symmetry"><span class="id" title="lemma">disjoint_dom_symmetry</span></a>; <span class="id" title="tactic">auto</span>|]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="extend_some_2"><span class="id" title="lemma">extend_some_2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#extend"><span class="id" title="definition">extend</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">disjoint_dom_sym_auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, ?<span class="id" title="var">g</span> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> ?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.function_operations.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">g</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <span class="id" title="keyword">context</span>[?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span>]] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="extend_into"><span class="id" title="lemma">extend_into</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">h</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> (<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">eapply</span> <a class="idref" href="com.chainmail.function_operations.html#extend_some_1"><span class="id" title="lemma">extend_some_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">extend_into</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="extend_into_disjoint"><span class="id" title="lemma">extend_into_disjoint</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">h</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> (<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">disjoint_dom_sym_auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a'</span> <span class="id" title="var">b'</span>, <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">h</span> <a class="idref" href="com.chainmail.function_operations.html#b'"><span class="id" title="variable">b'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#c'"><span class="id" title="variable">c'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">g</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> ?<span class="id" title="var">h</span> ?<span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#c"><span class="id" title="variable">c</span></a>] =&gt; <span class="id" title="tactic">eapply</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.function_operations.html#extend_some_2"><span class="id" title="lemma">extend_some_2</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="into_extend"><span class="id" title="lemma">into_extend</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">h</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> (<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#extend_application"><span class="id" title="lemma">extend_application</span></a> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>); <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="var">andDestruct</span>]; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">maps_into_ext_decompose</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> (?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> ?<span class="id" title="var">g</span>) ?<span class="id" title="var">h</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : <a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> ?<span class="id" title="var">f</span> ?<span class="id" title="var">g</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <span class="id" title="var">f</span> <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <span class="id" title="var">g</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">eapply</span> <a class="idref" href="com.chainmail.function_operations.html#extend_into_disjoint"><span class="id" title="lemma">extend_into_disjoint</span></a>; <span class="id" title="tactic">eauto</span>|]<br/>
&nbsp;&nbsp;| [<span class="id" title="var">H</span> : <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> (?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> ?<span class="id" title="var">g</span>) ?<span class="id" title="var">h</span> |- <span class="id" title="var">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> <span class="id" title="var">f</span> <span class="id" title="var">h</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">eapply</span> <a class="idref" href="com.chainmail.function_operations.html#extend_into"><span class="id" title="lemma">extend_into</span></a>; <span class="id" title="tactic">eauto</span>|]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="extend_compose_distr"><span class="id" title="lemma">extend_compose_distr</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>}(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">h</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> (<a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a>) <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a><a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a><a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">∪</span></a> <a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a><a class="idref" href="com.chainmail.common.html#ee7d96fc379cbf67726a95b71cdead1d"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">maps_into_ext_decompose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#extend"><span class="id" title="definition">extend</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="com.chainmail.function_operations.html#partial_map_dec"><span class="id" title="lemma">partial_map_dec</span></a> <span class="id" title="var">a</span> <span class="id" title="var">f</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hnone</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">destruct_exists</span>|<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hnone</span>; <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">maps_into_from_auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="empty_maps_into"><span class="id" title="lemma">empty_maps_into</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}{<span class="id" title="var">HeqA</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}{<span class="id" title="var">HeqB</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a> (@<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqA"><span class="id" title="variable">HeqA</span></a>) <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#maps_into"><span class="id" title="definition">maps_into</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">empty_maps_into</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="empty_maps_from"><span class="id" title="lemma">empty_maps_from</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}{<span class="id" title="var">HeqB</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>} (<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#maps_from"><span class="id" title="definition">maps_from</span></a> (@<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqB"><span class="id" title="variable">HeqB</span></a>) <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#maps_from"><span class="id" title="definition">maps_from</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">empty_maps_from</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="empty_onto_empty"><span class="id" title="lemma">empty_onto_empty</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}{<span class="id" title="var">HeqA</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}{<span class="id" title="var">HeqB</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#onto"><span class="id" title="definition">onto</span></a> (@<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqA"><span class="id" title="variable">HeqA</span></a>) (@<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqB"><span class="id" title="variable">HeqB</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">empty_onto_empty</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Disjointedness&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="empty_disjoint_1"><span class="id" title="lemma">empty_disjoint_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}{<span class="id" title="var">HeqA</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> (@<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqA"><span class="id" title="variable">HeqA</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">empty_disjoint_1</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="empty_disjoint_2"><span class="id" title="lemma">empty_disjoint_2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}{<span class="id" title="var">HeqA</span> : <a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> (@<a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="com.chainmail.function_operations.html#HeqA"><span class="id" title="variable">HeqA</span></a>) <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="com.chainmail.function_operations.html#disjoint_dom_symmetry"><span class="id" title="lemma">disjoint_dom_symmetry</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">empty_disjoint_2</span> : <span class="id" title="var">map_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="disjointedness_for_finite_variable_maps"><span class="id" title="lemma">disjointedness_for_finite_variable_maps</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.common.html#var"><span class="id" title="inductive">var</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.common.html#var"><span class="id" title="inductive">var</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#finite_normal_form"><span class="id" title="inductive">finite_normal_form</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">s</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><span class="id" title="var">h</span> <span class="id" title="var">h'</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.common.html#var"><span class="id" title="inductive">var</span></a> <a class="idref" href="com.chainmail.common.html#var"><span class="id" title="inductive">var</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#onto"><span class="id" title="definition">onto</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#one_to_one"><span class="id" title="definition">one_to_one</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.function_operations.html#inv"><span class="id" title="definition">inv</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="com.chainmail.function_operations.html#h'"><span class="id" title="variable">h'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a> <a class="idref" href="com.chainmail.function_operations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="com.chainmail.loo_def.html#in_stmt"><span class="id" title="inductive">in_stmt</span></a> <a class="idref" href="com.chainmail.function_operations.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="com.chainmail.function_operations.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">Hfin1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfin1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">g</span> <span class="id" title="var">Hfin2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hfin2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>; <span class="id" title="tactic">exists</span> <a class="idref" href="com.chainmail.common.html#empty"><span class="id" title="definition">empty</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">map_rewrite</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">s</span>.<br/>

<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="disjoint_composition"><span class="id" title="lemma">disjoint_composition</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a>}`{<a class="idref" href="com.chainmail.common.html#Eq"><span class="id" title="class">Eq</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>}(<span class="id" title="var">f</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#B"><span class="id" title="variable">B</span></a>)(<span class="id" title="var">g</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">D</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">h</span> : <a class="idref" href="com.chainmail.common.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="com.chainmail.function_operations.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="com.chainmail.function_operations.html#D"><span class="id" title="variable">D</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <a class="idref" href="com.chainmail.function_operations.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="com.chainmail.function_operations.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.function_operations.html#h"><span class="id" title="variable">h</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#disjoint_dom"><span class="id" title="definition">disjoint_dom</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#bind"><span class="id" title="method">bind</span></a>; <span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">Ha</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a'</span> <span class="id" title="var">b'</span>, ?<span class="id" title="var">f</span> <a class="idref" href="com.chainmail.function_operations.html#a'"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.function_operations.html#b'"><span class="id" title="variable">b'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">_</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : ?<span class="id" title="var">f</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ?<span class="id" title="var">b</span> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ha</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">Hb</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">disjoint_composition</span> : <span class="id" title="var">map_db</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
