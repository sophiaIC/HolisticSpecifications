<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">com.chainmail.restricted_properties</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.loo_reduction_properties.html#"><span class="id" title="library">loo_reduction_properties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.common.html#"><span class="id" title="library">common</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.loo_def.html#"><span class="id" title="library">loo_def</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.loo_properties.html#"><span class="id" title="library">loo_properties</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.function_operations.html#"><span class="id" title="library">function_operations</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.decoupling.html#"><span class="id" title="library">decoupling</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="com.chainmail.CpdtTactics.html#"><span class="id" title="library">CpdtTactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">Coq.Logic.FunctionalExtensionality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="mapp_iff_vMap_Some"><span class="id" title="lemma">mapp_iff_vMap_Some</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> χ <span class="id" title="var">ϕ</span> ψ, <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">⟦</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">↦</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">⟧</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">∈</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#4bfb4f2d0721ba668e3a802ab1b745a1"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#vMap"><span class="id" title="projection">vMap</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#v"><span class="id" title="variable">v</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> χ <span class="id" title="var">ϕ</span> ψ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapStack"><span class="id" title="instance">configMapStack</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#stackMap"><span class="id" title="instance">stackMap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">mapp_iff_vMap_Some</span> : <span class="id" title="var">loo_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restriction_implies_same"><span class="id" title="lemma">restriction_implies_same</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> ψ χ <span class="id" title="var">Σ</span> χ' <span class="id" title="var">α</span> <span class="id" title="var">o</span> <span class="id" title="var">o'</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#ab410a966ac148e9b78c65c6cdf301fd"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#ab410a966ac148e9b78c65c6cdf301fd"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#o'"><span class="id" title="variable">o'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#o'"><span class="id" title="variable">o'</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ψ χ <span class="id" title="var">Σ</span> χ' <span class="id" title="var">α</span> <span class="id" title="var">o</span> <span class="id" title="var">o'</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">H</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">restriction_implies_same</span> : <span class="id" title="var">loo_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="mapp_ingores_heap"><span class="id" title="lemma">mapp_ingores_heap</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> (χ χ' : <a class="idref" href="com.chainmail.loo_def.html#heap"><span class="id" title="definition">heap</span></a>) ψ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">⟦</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">↦</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">⟧</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">∈</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">⟦</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">↦</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">⟧</span></a> <a class="idref" href="com.chainmail.common.html#d21dfac668d7b00392ea6f5a99710b78"><span class="id" title="notation">∈</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> χ χ' ψ <span class="id" title="var">Hexpanded</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapStack"><span class="id" title="instance">configMapStack</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">mapp_ingores_heap</span> : <span class="id" title="var">loo_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_classOf_implies_classOf"><span class="id" title="lemma">restricted_classOf_implies_classOf</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> χ ψ <span class="id" title="var">C</span> <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#classOf"><span class="id" title="inductive">classOf</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#C"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#classOf"><span class="id" title="inductive">classOf</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#C"><span class="id" title="variable">C</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> χ ψ <span class="id" title="var">C</span> <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hclass</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hclass</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#cls_of"><span class="id" title="constructor">cls_of</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">α</span> χ <span class="id" title="var">o</span> (<a class="idref" href="com.chainmail.loo_def.html#cname"><span class="id" title="projection">cname</span></a> <span class="id" title="var">o</span>)); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">restricted_classOf_implies_classOf</span> : <span class="id" title="var">loo_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a name="1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a name="1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> χ <span class="id" title="var">ϕ</span> ψ, <a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">has_self_</span></a><a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#1212498f196fc5c6a3d82bffe1bcce56"><span class="id" title="inductive">has_self_ϕ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> χ <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">Hself</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">ϕ</span> (<span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ)). { <span class="id" title="var">crush</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">has_self_</span>σ<span class="id" title="var">_top_frame_has_self_ϕ</span> : <span class="id" title="var">loo_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_external_self_implies_external_self"><span class="id" title="lemma">restricted_external_self_implies_external_self</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> χ χ' <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">Σ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#external_self"><span class="id" title="definition">external_self</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#external_self"><span class="id" title="definition">external_self</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> χ χ' <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">Σ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hexternal_self</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hexternal_self</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">α</span> [<span class="id" title="var">o</span> [<span class="id" title="var">Hthis</span> [<span class="id" title="var">Hα</span> <span class="id" title="var">HC</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#external_self"><span class="id" title="definition">external_self</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#is_external"><span class="id" title="definition">is_external</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">α</span>, <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">restricted_external_self_implies_external_self</span> : <span class="id" title="var">loo_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="has_top_reduces_to_has_top"><span class="id" title="lemma">has_top_reduces_to_has_top</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M</span> χ χ' <span class="id" title="var">ϕ</span> ψ ψ', <a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">∙</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">⤳</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#83abdf60aef333c8e5128c17ddc747cb"><span class="id" title="variable">ψ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">ϕ'</span> ψ''<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#83abdf60aef333c8e5128c17ddc747cb"><span class="id" title="variable">ψ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#70bf7c3821a6c56a710a5298bea8b893"><span class="id" title="variable">ϕ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#c093f090ef0b1a1dfeae086aeb99cea8"><span class="id" title="variable">ψ''</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span> χ χ' <span class="id" title="var">ϕ</span> ψ ψ' <span class="id" title="var">Hred</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hred</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> {| <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ0</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">;</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">c_stmt</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">s</span></a> |}, ψ0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> {| <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">update</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">this</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">v_addr</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">α</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ps</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">∘</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ0</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">);</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">c_stmt</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">merge</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">s</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">s_rtrn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">this</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">))</span></a> |}, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">{|</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ0</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">;</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">c_hole</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">x</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">has_top_reduces_to_has_top</span> : <span class="id" title="var">loo_db</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_evaluation_implies_evaluation"><span class="id" title="lemma">restricted_evaluation_implies_evaluation</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> ψ <span class="id" title="var">e</span> <span class="id" title="var">v</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#1e59bed646235ea420827b6ea09ed821"><span class="id" title="notation">∙</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_def.html#1e59bed646235ea420827b6ea09ed821"><span class="id" title="notation">⊢</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="com.chainmail.loo_def.html#1e59bed646235ea420827b6ea09ed821"><span class="id" title="notation">↪</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#1e59bed646235ea420827b6ea09ed821"><span class="id" title="notation">∙</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#1e59bed646235ea420827b6ea09ed821"><span class="id" title="notation">⊢</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="com.chainmail.loo_def.html#1e59bed646235ea420827b6ea09ed821"><span class="id" title="notation">↪</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> ψ <span class="id" title="var">e</span> <span class="id" title="var">v</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hev</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> χ. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> ψ. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">ϕ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hev</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">HϕΣ</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#v_f_ghost"><span class="id" title="constructor">v_f_ghost</span></a> <span class="id" title="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">e0</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span> <span class="id" title="var">α</span> <span class="id" title="var">o</span> <span class="id" title="var">x</span> <span class="id" title="var">e'</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">C</span>); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">update_</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">σ</span></a><a class="idref" href="com.chainmail.loo_def.html#f4dcd1c0296092d00fafd88bdca50422"><span class="id" title="definition">_map</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#3e651ce924de45057a24c678b067cec1"><span class="id" title="definition">update_ϕ_map</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> {| <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">update</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">this</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">v_addr</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">α</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">update</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">x</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">v</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">));</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ</span></a> |} <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHev3</span>.<br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;--&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;rstrct&nbsp;with&nbsp;(As:=As)&nbsp;(χ:=χ);&nbsp;eauto&nbsp;with&nbsp;loo_db.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;induction&nbsp;H2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;inversion&nbsp;HϕΣ;&nbsp;subst;&nbsp;simpl&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H1;&nbsp;subst.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;int_cons;&nbsp;eauto&nbsp;with&nbsp;loo_db.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;inversion&nbsp;H;&nbsp;subst.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;int_x.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H2;&nbsp;subst.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;mapp&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;configMapStack&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;mapp&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;stackMap&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;σ;&nbsp;subst;&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO&nbsp;stuck!&nbsp;*)</span><br/>

<br/>
&nbsp;<span class="comment">(*&nbsp;&nbsp;-&nbsp;apply&nbsp;(v_f_heap&nbsp;M&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;e&nbsp;f&nbsp;α&nbsp;o&nbsp;v);&nbsp;auto&nbsp;with&nbsp;loo_db.<br/>
&nbsp;&nbsp;-&nbsp;apply&nbsp;(v_equals&nbsp;M&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;e1&nbsp;e2&nbsp;v);&nbsp;auto&nbsp;with&nbsp;loo_db.<br/>
&nbsp;&nbsp;-&nbsp;apply&nbsp;(v_nequals&nbsp;M&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;e1&nbsp;e2&nbsp;v1&nbsp;v2);&nbsp;auto&nbsp;with&nbsp;loo_db.<br/>
&nbsp;&nbsp;-&nbsp;apply&nbsp;(v_lt&nbsp;M&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;e1&nbsp;e2&nbsp;i1&nbsp;i2);&nbsp;auto&nbsp;with&nbsp;loo_db.<br/>
&nbsp;&nbsp;-&nbsp;apply&nbsp;(v_nlt&nbsp;M&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;e1&nbsp;e2&nbsp;i1&nbsp;i2);&nbsp;auto&nbsp;with&nbsp;loo_db.&nbsp;*)</span><br/>
<span class="id" title="var">Admitted</span>. <span class="comment">(*&nbsp;apply&nbsp;(v_if_true&nbsp;M&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;(e1&nbsp;⩵&nbsp;e2)&nbsp;e1&nbsp;e2&nbsp;v);&nbsp;auto&nbsp;with&nbsp;loo_db.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restriction_ignores_stack"><span class="id" title="lemma">restriction_ignores_stack</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> χ χ' ψ ψ' <span class="id" title="var">Σ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#83abdf60aef333c8e5128c17ddc747cb"><span class="id" title="variable">ψ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#83abdf60aef333c8e5128c17ddc747cb"><span class="id" title="variable">ψ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> χ χ' ψ ψ' <span class="id" title="var">Σ</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.loo_def.html#rstrct"><span class="id" title="constructor">rstrct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">As</span>:=<span class="id" title="var">As</span>) (χ:=χ); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> ψ'. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> χ'.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> χ' <span class="id" title="var">HϕΣ</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> χ' <span class="id" title="var">HϕΣ</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span> ψ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;crush.&nbsp;apply&nbsp;int_cons.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;inversion&nbsp;H;&nbsp;subst.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;int_x.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;mapp&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;configMapStack&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;mapp&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;stackMap&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;*)</span><br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Hint&nbsp;Resolve&nbsp;restriction_ignores_stack&nbsp;:&nbsp;loo_db.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_reduction_implies_reduction"><span class="id" title="lemma">restricted_reduction_implies_reduction</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.loo_def.html#1212498f196fc5c6a3d82bffe1bcce56"><span class="id" title="inductive">has_self_ϕ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">∙</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">∙</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hself</span> [σ <span class="id" title="var">H</span>σ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> [χ<span class="id" title="var">_</span> <span class="id" title="var">ϕ_</span> [<span class="id" title="var">α_this</span> [[<span class="id" title="var">C_this</span> <span class="id" title="var">flds_this</span>] [<span class="id" title="var">Hthisϕ</span> <span class="id" title="var">Hthis</span>χ]]]]. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>σ; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> χ0 <span class="id" title="var">ϕ0</span> ψ0 σ <span class="id" title="var">Σ0</span> χ1 <span class="id" title="var">x0</span> σ0 <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> {| <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">;</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">c_hole</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">x</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">s'</span></a> |} <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> {| <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">update</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">this</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">v_addr</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">α</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ps</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">∘</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">);</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">c_stmt</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">s</span></a> |} <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">ϕ'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#r_mth"><span class="id" title="constructor">r_mth</span></a> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">ps</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">m</span> <span class="id" title="var">zs</span> <span class="id" title="var">α</span> <span class="id" title="var">o</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">C</span> <span class="id" title="var">ϕ'</span> <span class="id" title="var">ϕ''</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.loo_def.html#int_x"><span class="id" title="constructor">int_x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">crush</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> χ0 <span class="id" title="var">ϕ0</span> ψ0 σ <span class="id" title="var">Σ0</span> χ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">{|</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">update</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">x</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">v</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">(</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">vMap</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">ϕ</span></a><a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">);</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">contn</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">c_stmt</span></a> <a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#r_eAssgn"><span class="id" title="constructor">r_eAssgn</span></a> <span class="id" title="var">M</span> χ <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">x</span> <span class="id" title="var">e</span> <span class="id" title="var">v</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_evaluation_implies_evaluation"><span class="id" title="axiom">restricted_evaluation_implies_evaluation</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">ϕΣ</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<span class="id" title="var">Σ</span>:=<span class="id" title="var">Σ</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> χ0 <span class="id" title="var">ϕ0</span> ψ0 σ <span class="id" title="var">Σ0</span> χ1 <span class="id" title="var">x0</span> σ0 <span class="id" title="var">v0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">frm</span></a> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">x</span> <span class="id" title="var">v</span> (<a class="idref" href="com.chainmail.loo_def.html#vMap"><span class="id" title="projection">vMap</span></a> <span class="id" title="var">ϕ</span>)) (<a class="idref" href="com.chainmail.loo_def.html#c_stmt"><span class="id" title="constructor">c_stmt</span></a> <span class="id" title="var">s</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#r_xAssgn"><span class="id" title="constructor">r_xAssgn</span></a> <span class="id" title="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">ϕ</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> ψ χ <span class="id" title="var">α</span> <span class="id" title="var">v</span> <span class="id" title="var">o</span> <span class="id" title="var">ϕ'</span> <span class="id" title="var">C</span>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H24</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H31</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#mapp_iff_vMap_Some"><span class="id" title="lemma">mapp_iff_vMap_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H38</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H38</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hthisϕ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hthisϕ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> {| <a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">cname</span></a> <a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">C_this</span></a><a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">;</span></a> <a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">flds</span></a> <a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">:=</span></a> <a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">flds_this</span></a> |} <span class="id" title="keyword">as</span> <span class="id" title="var">o'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">o0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">o'</span>). { <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">α0</span> <span class="id" title="var">o0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> χ1 <span class="id" title="var">into</span> χ, χ3 <span class="id" title="var">into</span> χ', <span class="id" title="var">ϕ0</span> <span class="id" title="var">into</span> <span class="id" title="var">ϕ</span>, ψ0 <span class="id" title="var">into</span> ψ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">frm</span></a> (<a class="idref" href="com.chainmail.loo_def.html#vMap"><span class="id" title="projection">vMap</span></a> <span class="id" title="var">ϕ</span>) (<a class="idref" href="com.chainmail.loo_def.html#c_stmt"><span class="id" title="constructor">c_stmt</span></a> <span class="id" title="var">s</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">α</span> <span class="id" title="var">o'</span> χ) <span class="id" title="keyword">as</span> χ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ1<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#r_fAssgn"><span class="id" title="constructor">r_fAssgn</span></a> <span class="id" title="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">ϕ</span> <span class="id" title="var">ϕ'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> ψ χ <span class="id" title="var">α</span> <span class="id" title="var">v</span> <span class="id" title="var">o</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ1<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> χ1 <span class="id" title="var">o'</span> <span class="id" title="var">C_this</span>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_classOf_implies_classOf"><span class="id" title="lemma">restricted_classOf_implies_classOf</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Σ</span>:=<span class="id" title="var">Σ</span>) (<span class="id" title="var">ϕΣ</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#cls_of"><span class="id" title="constructor">cls_of</span></a> <a class="idref" href="com.chainmail.loo_def.html#this"><span class="id" title="definition">this</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">α_this</span> χ' <span class="id" title="var">o'</span> <span class="id" title="var">C_this</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_classOf_implies_classOf"><span class="id" title="lemma">restricted_classOf_implies_classOf</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Σ</span>:=<span class="id" title="var">Σ</span>) (<span class="id" title="var">ϕΣ</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#cls_of"><span class="id" title="constructor">cls_of</span></a> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">α1</span> χ' <span class="id" title="var">o'</span> <span class="id" title="var">C_this</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> χ0 χ1 <span class="id" title="var">ϕ0</span> χ2 ψ0 <span class="id" title="var">Σ0</span> σ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">frm</span></a> (<a class="idref" href="com.chainmail.loo_def.html#vMap"><span class="id" title="projection">vMap</span></a> <span class="id" title="var">ϕ</span>) (<a class="idref" href="com.chainmail.loo_def.html#c_hole"><span class="id" title="constructor">c_hole</span></a> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">frm</span></a> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <a class="idref" href="com.chainmail.loo_def.html#this"><span class="id" title="definition">this</span></a> (<a class="idref" href="com.chainmail.loo_def.html#v_addr"><span class="id" title="constructor">v_addr</span></a> <span class="id" title="var">α</span>) (<span class="id" title="var">ps</span> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.loo_def.html#vMap"><span class="id" title="projection">vMap</span></a> <span class="id" title="var">ϕ</span><a class="idref" href="com.chainmail.common.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="com.chainmail.loo_def.html#c_stmt"><span class="id" title="constructor">c_stmt</span></a> (<a class="idref" href="com.chainmail.loo_def.html#merge"><span class="id" title="definition">merge</span></a> <span class="id" title="var">s</span> (<a class="idref" href="com.chainmail.loo_def.html#s_rtrn"><span class="id" title="constructor">s_rtrn</span></a> <a class="idref" href="com.chainmail.loo_def.html#this"><span class="id" title="definition">this</span></a>)))) <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.loo_def.html#new"><span class="id" title="constructor">new</span></a> <span class="id" title="var">C</span> <span class="id" title="var">fMap</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.common.html#update"><span class="id" title="definition">update</span></a> <span class="id" title="var">α</span> <span class="id" title="var">o</span> χ) <span class="id" title="keyword">as</span> χ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;TODO&nbsp;fresh&nbsp;in&nbsp;heaps&nbsp;are&nbsp;hard,&nbsp;need&nbsp;proof&nbsp;there&nbsp;is&nbsp;alway&nbsp;a&nbsp;fresh&nbsp;heap&nbsp;address&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> χ0 χ1 <span class="id" title="var">ϕ0</span> <span class="id" title="var">Σ0</span> σ ψ0; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">frm</span></a> (<a class="idref" href="com.chainmail.loo_def.html#vMap"><span class="id" title="projection">vMap</span></a> <span class="id" title="var">ϕ</span>) (<a class="idref" href="com.chainmail.loo_def.html#c_stmt"><span class="id" title="constructor">c_stmt</span></a> (<a class="idref" href="com.chainmail.loo_def.html#merge"><span class="id" title="definition">merge</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#r_if1"><span class="id" title="constructor">r_if1</span></a> <span class="id" title="var">M</span> χ <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">e</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_evaluation_implies_evaluation"><span class="id" title="axiom">restricted_evaluation_implies_evaluation</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Σ</span>:=<span class="id" title="var">Σ</span>) (<span class="id" title="var">ϕΣ</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> χ0 χ1 <span class="id" title="var">ϕ0</span> <span class="id" title="var">Σ0</span> σ ψ0; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="com.chainmail.loo_def.html#frm"><span class="id" title="constructor">frm</span></a> (<a class="idref" href="com.chainmail.loo_def.html#vMap"><span class="id" title="projection">vMap</span></a> <span class="id" title="var">ϕ</span>) (<a class="idref" href="com.chainmail.loo_def.html#c_stmt"><span class="id" title="constructor">c_stmt</span></a> (<a class="idref" href="com.chainmail.loo_def.html#merge"><span class="id" title="definition">merge</span></a> <span class="id" title="var">s2</span> <span class="id" title="var">s</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#r_if2"><span class="id" title="constructor">r_if2</span></a> <span class="id" title="var">M</span> χ <span class="id" title="var">ϕ</span> ψ <span class="id" title="var">e</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">s</span>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_evaluation_implies_evaluation"><span class="id" title="axiom">restricted_evaluation_implies_evaluation</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Σ</span>:=<span class="id" title="var">Σ</span>) (<span class="id" title="var">ϕΣ</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(χ1,&nbsp;ϕ''&nbsp;::&nbsp;ϕ'&nbsp;::&nbsp;nil).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(r_new&nbsp;M&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;(χ1,&nbsp;ϕ''&nbsp;::&nbsp;ϕ'&nbsp;::&nbsp;nil)&nbsp;χ&nbsp;nil&nbsp;ϕ&nbsp;ϕ'&nbsp;ϕ''&nbsp;α&nbsp;x&nbsp;C&nbsp;fMap&nbsp;zs&nbsp;s&nbsp;s'&nbsp;o&nbsp;CDef&nbsp;ps);&nbsp;eauto&nbsp;with&nbsp;loo_db;&nbsp;try&nbsp;solve&nbsp;<span class="inlinecode"><span class="id" title="tactic">subst</span>;</span> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
Admitted.&nbsp;<span class="comment">(*&nbsp;H6&nbsp;:&nbsp;⌊&nbsp;y&nbsp;⌋&nbsp;(χ',&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;≜&nbsp;v_addr&nbsp;α&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_reductions_implies_reductions"><span class="id" title="lemma">restricted_reductions_implies_reductions</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.loo_def.html#1212498f196fc5c6a3d82bffe1bcce56"><span class="id" title="inductive">has_self_ϕ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_reduction_properties.html#9c2d269e1251b18be89275a391c4971d"><span class="id" title="notation">∙</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_reduction_properties.html#9c2d269e1251b18be89275a391c4971d"><span class="id" title="notation">⤳⋆</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_reduction_properties.html#9c2d269e1251b18be89275a391c4971d"><span class="id" title="notation">∙</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_reduction_properties.html#9c2d269e1251b18be89275a391c4971d"><span class="id" title="notation">⤳⋆</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hself</span> [σ <span class="id" title="var">H</span>σ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>σ <span class="id" title="keyword">as</span> [ <span class="id" title="var">M</span> σ σ' <span class="id" title="var">H</span>σ | <span class="id" title="var">M</span> σ σ' σ'' <span class="id" title="var">H</span>σ <span class="id" title="var">H</span>σ' <span class="id" title="var">IH</span>σ ].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.restricted_properties.html#restricted_reduction_implies_reduction"><span class="id" title="axiom">restricted_reduction_implies_reduction</span></a> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> σ) <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> [σ1 <span class="id" title="var">H</span>σ1].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> σ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.restricted_properties.html#restricted_reduction_implies_reduction"><span class="id" title="axiom">restricted_reduction_implies_reduction</span></a> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> σ) <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> [σ1 <span class="id" title="var">H</span>σ1].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> σ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_reductions_internal_self_implies_internal_self"><span class="id" title="lemma">restricted_reductions_internal_self_implies_internal_self</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">ϕΣ'</span> χ <span class="id" title="var">ϕ</span> ψ σ', <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">has_self_</span></a><a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#3927968c5bb656362785c2ed283989be"><span class="id" title="notation">⋄</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#3927968c5bb656362785c2ed283989be"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">∙</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#76917c6e218e735b0e5d2955cba83bf0"><span class="id" title="variable">ϕΣ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">∙</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#internal_self"><span class="id" title="definition">internal_self</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#76917c6e218e735b0e5d2955cba83bf0"><span class="id" title="variable">ϕΣ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#internal_self"><span class="id" title="definition">internal_self</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">ϕΣ'</span> χ <span class="id" title="var">ϕ</span> ψ σ' <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hself</span> <span class="id" title="var">HM</span> <span class="id" title="var">HϕΣ'</span> <span class="id" title="var">H</span>σ' <span class="id" title="var">Hinternal_self</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hselfϕ</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hselfϕ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hinternal_self</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">αthis1'</span> [<span class="id" title="var">othis1'</span> [<span class="id" title="var">Cthis</span> [<span class="id" title="var">Hthis1'</span> [<span class="id" title="var">Hα1'</span> <span class="id" title="var">HCthis</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#internal_self"><span class="id" title="definition">internal_self</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#is_internal"><span class="id" title="definition">is_internal</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ϕΣ'</span> <span class="id" title="keyword">as</span> [χ1' ψ1'0].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> σ' <span class="id" title="keyword">as</span> [χ1 ψ10].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#has_top_reduces_to_has_top"><span class="id" title="lemma">has_top_reduces_to_has_top</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HϕΣ'1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HϕΣ'1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ϕ1'</span> [ψ1' <span class="id" title="var">Hϕ1'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#has_top_reduces_to_has_top"><span class="id" title="lemma">has_top_reduces_to_has_top</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>σ' <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>σ'1; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>σ'1 <span class="id" title="keyword">as</span> [<span class="id" title="var">ϕ1</span> [ψ1 <span class="id" title="var">Hϕ1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H10</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">αthis</span> [<span class="id" title="var">othis</span> [<span class="id" title="var">Hαthis</span> <span class="id" title="var">Hothis</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.loo_reduction_properties.html#reduction_preserves_config_has_self"><span class="id" title="lemma">reduction_preserves_config_has_self</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">M</span>:=<span class="id" title="var">M</span>) (σ2:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ1<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ1<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hself'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hself'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hself'ϕ</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself'ϕ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">αthis1</span> [<span class="id" title="var">othis1</span> [<span class="id" title="var">Hαthis1</span> <span class="id" title="var">Hothis1</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">αthis1</span>, <span class="id" title="var">othis1</span>, <span class="id" title="var">Cthis</span>. <span class="comment">(*&nbsp;α&nbsp;should&nbsp;be&nbsp;vMap&nbsp;ϕ&nbsp;this&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.restricted_properties.html#mapp_iff_vMap_Some"><span class="id" title="lemma">mapp_iff_vMap_Some</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapHeap"><span class="id" title="instance">configMapHeap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα1'</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="var">Admitted</span>. <span class="comment">(*&nbsp;TODO&nbsp;needs&nbsp;a&nbsp;proof,&nbsp;left&nbsp;for&nbsp;now&nbsp;as&nbsp;distracting&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;restruction_reduction_this_class_is_reduction_this_class&nbsp;:<br/>
&nbsp;&nbsp;forall&nbsp;M&nbsp;Σ&nbsp;χ&nbsp;χ'&nbsp;χ1'&nbsp;ϕ&nbsp;ϕ1'&nbsp;ψ&nbsp;ψ1'&nbsp;α1&nbsp;α1'&nbsp;othis1&nbsp;othis1',&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;↓&nbsp;Σ&nbsp;≜&nbsp;(χ',&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;-&gt;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;has_self_σ&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;M&nbsp;∙&nbsp;(χ',&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;⤳&nbsp;(χ1',&nbsp;ϕ1'&nbsp;::&nbsp;ψ1')&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;vMap&nbsp;ϕ'&nbsp;this&nbsp;=&nbsp;Some&nbsp;(v_addr&nbsp;α1')&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;χ'&nbsp;α1'&nbsp;=&nbsp;Some&nbsp;othis1'&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;vMap&nbsp;ϕ&nbsp;this&nbsp;=&nbsp;Some&nbsp;(v_addr&nbsp;α1)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;χ&nbsp;α1&nbsp;=&nbsp;Some&nbsp;othis1&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;cname&nbsp;othis1&nbsp;=&nbsp;cname&nbsp;othis1'<br/>
.<br/>
Proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;M&nbsp;Σ&nbsp;χ&nbsp;χ'&nbsp;χ1'&nbsp;ϕ&nbsp;ϕ'&nbsp;ϕ1'&nbsp;ψ&nbsp;ψ'&nbsp;ψ1'&nbsp;α1&nbsp;α1'&nbsp;othis1&nbsp;othis1'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HϕΣ&nbsp;Hself&nbsp;Hσ1'&nbsp;Hthis'&nbsp;Hα1'&nbsp;Hthis&nbsp;Hα1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;HϕΣ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;Hself.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;has_self_σ_top_frame_has_self_ϕ&nbsp;in&nbsp;Hself&nbsp;as&nbsp;Hselfϕ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;subst;&nbsp;simpl&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;Hσ1'.<br/>
Qed.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_internal_reductions_implies_internal_reductions"><span class="id" title="lemma">restricted_internal_reductions_implies_internal_reductions</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">has_self_</span></a><a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#bf05765bc38bec1d1cfe66aedd971f5e"><span class="id" title="notation">⦂</span></a>  <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#bf05765bc38bec1d1cfe66aedd971f5e"><span class="id" title="notation">⦿</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_def.html#bf05765bc38bec1d1cfe66aedd971f5e"><span class="id" title="notation">⤳…</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#bf05765bc38bec1d1cfe66aedd971f5e"><span class="id" title="notation">⦂</span></a>  <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#bf05765bc38bec1d1cfe66aedd971f5e"><span class="id" title="notation">⦿</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#bf05765bc38bec1d1cfe66aedd971f5e"><span class="id" title="notation">⤳…</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hself</span> [σ <span class="id" title="var">H</span>σ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>σ <span class="id" title="keyword">as</span> [ <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">M</span> σ σ' <span class="id" title="var">HM</span> <span class="id" title="var">H'</span> | <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> σ σ' σ'' <span class="id" title="var">H</span>σ <span class="id" title="var">H</span>σ' <span class="id" title="var">IH</span>σ ]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hselfϕ</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.restricted_properties.html#restricted_reduction_implies_reduction"><span class="id" title="axiom">restricted_reduction_implies_reduction</span></a> <span class="id" title="var">M</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hselfϕ</span> <span class="id" title="keyword">as</span> [[χ'' ψ''0] <span class="id" title="var">H</span>σ'']; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#has_top_reduces_to_has_top"><span class="id" title="lemma">has_top_reduces_to_has_top</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>σ'' <span class="id" title="keyword">as</span> <span class="id" title="var">Hex</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hex</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ϕ''</span> [ψ'' <span class="id" title="var">Heq</span>σ'']]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ''<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ''<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.loo_def.html#pr_single"><span class="id" title="constructor">pr_single</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">M1</span>:=<span class="id" title="var">M1</span>) (<span class="id" title="var">M2</span>:=<span class="id" title="var">M2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>σ''; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H8</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">α</span> [<span class="id" title="var">o</span> [<span class="id" title="var">C</span> [<span class="id" title="var">Hthis</span> [<span class="id" title="var">Hα</span> <span class="id" title="var">HC</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.restricted_properties.html#restricted_reductions_internal_self_implies_internal_self"><span class="id" title="axiom">restricted_reductions_internal_self_implies_internal_self</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">M</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">Σ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> σ' χ <span class="id" title="var">ϕ</span> ψ <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ''<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ''</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ''<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>σ <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="keyword">as</span> [σ' <span class="id" title="var">H'</span>]; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> σ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_reductions_external_self_implies_external_self"><span class="id" title="lemma">restricted_reductions_external_self_implies_external_self</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">ϕΣ'</span> χ <span class="id" title="var">ϕ</span> ψ σ', <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">has_self_</span></a><a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#3927968c5bb656362785c2ed283989be"><span class="id" title="notation">⋄</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#3927968c5bb656362785c2ed283989be"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">∙</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#76917c6e218e735b0e5d2955cba83bf0"><span class="id" title="variable">ϕΣ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.restricted_properties.html#M"><span class="id" title="variable">M</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">∙</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#67e3ffb369f207e5010d0d8d38e8eb50"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#external_self"><span class="id" title="definition">external_self</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#76917c6e218e735b0e5d2955cba83bf0"><span class="id" title="variable">ϕΣ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#external_self"><span class="id" title="definition">external_self</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">ϕΣ'</span> χ <span class="id" title="var">ϕ</span> ψ σ' <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hself</span> <span class="id" title="var">HM</span> <span class="id" title="var">HϕΣ'</span> <span class="id" title="var">H</span>σ' <span class="id" title="var">Hexternal_self</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hselfϕ</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hselfϕ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hexternal_self</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">α</span> [<span class="id" title="var">o</span> [<span class="id" title="var">Hthis</span> [<span class="id" title="var">Hα</span> <span class="id" title="var">HC</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#external_self"><span class="id" title="definition">external_self</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#is_external"><span class="id" title="definition">is_external</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ϕΣ'</span> <span class="id" title="keyword">as</span> [χ1' ψ1'0].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> σ' <span class="id" title="keyword">as</span> [χ1 ψ10].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#has_top_reduces_to_has_top"><span class="id" title="lemma">has_top_reduces_to_has_top</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HϕΣ'1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HϕΣ'1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ϕ1'</span> [ψ1' <span class="id" title="var">Hϕ1'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#has_top_reduces_to_has_top"><span class="id" title="lemma">has_top_reduces_to_has_top</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>σ' <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>σ'1; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>σ'1 <span class="id" title="keyword">as</span> [<span class="id" title="var">ϕ1</span> [ψ1 <span class="id" title="var">Hϕ1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H10</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">αthis</span> [<span class="id" title="var">othis</span> [<span class="id" title="var">Hαthis</span> <span class="id" title="var">Hothis</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.loo_reduction_properties.html#reduction_preserves_config_has_self"><span class="id" title="lemma">reduction_preserves_config_has_self</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">M</span>:=<span class="id" title="var">M</span>) (σ2:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ1<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ1<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hself'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hself'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hself'ϕ</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself'ϕ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">αthis'</span> [<span class="id" title="var">othis'</span> [<span class="id" title="var">Hαthis'</span> <span class="id" title="var">Hothis'</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">αthis'</span>, <span class="id" title="var">othis'</span>. <span class="comment">(*&nbsp;α&nbsp;should&nbsp;be&nbsp;vMap&nbsp;ϕ&nbsp;this&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="com.chainmail.restricted_properties.html#mapp_iff_vMap_Some"><span class="id" title="lemma">mapp_iff_vMap_Some</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.common.html#mapp"><span class="id" title="definition">mapp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="com.chainmail.loo_def.html#configMapHeap"><span class="id" title="instance">configMapHeap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hα</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="var">Admitted</span>. <span class="comment">(*&nbsp;TODO&nbsp;needs&nbsp;a&nbsp;proof,&nbsp;left&nbsp;for&nbsp;now&nbsp;as&nbsp;distracting&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_pair_reduction_implies_pair_reduction"><span class="id" title="lemma">restricted_pair_reduction_implies_pair_reduction</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">has_self_</span></a><a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦂</span></a>  <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦿</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦂</span></a>  <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦿</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hself</span> [σ <span class="id" title="var">H</span>σ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hselfϕ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hselfϕ</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H10</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">αthis</span> [<span class="id" title="var">othis</span> [<span class="id" title="var">Hαthis</span> <span class="id" title="var">Hothis</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>σ; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_internal_reductions_implies_internal_reductions"><span class="id" title="lemma">restricted_internal_reductions_implies_internal_reductions</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">M1</span>:=<span class="id" title="var">M1</span>) (<span class="id" title="var">M2</span>:=<span class="id" title="var">M2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HϕΣ'</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">HϕΣ'</span> <span class="id" title="keyword">as</span> [σ' <span class="id" title="var">H</span>σ']);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> σ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.loo_def.html#p_external"><span class="id" title="constructor">p_external</span></a> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">M</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> σ'); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_reduction_implies_reduction"><span class="id" title="axiom">restricted_reduction_implies_reduction</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">M</span>:=<span class="id" title="var">M</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="keyword">as</span> [σ'' <span class="id" title="var">H</span>σ'']; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>σ'; <span class="id" title="tactic">subst</span>; <span class="id" title="var">link_unique_auto</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;TODO&nbsp;AHHH&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_reduction_implies_reduction"><span class="id" title="axiom">restricted_reduction_implies_reduction</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">M</span>:=<span class="id" title="var">M</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="keyword">as</span> [σ'' <span class="id" title="var">H</span>σ'']; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_pair_reduction_implies_pair_reduction"><span class="id" title="lemma">restricted_pair_reduction_implies_pair_reduction</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">has_self_</span></a><a class="idref" href="com.chainmail.loo_def.html#0af6b8f5b841dac3e604978983541c84"><span class="id" title="inductive">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦂</span></a>  <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦿</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6885b4c05c63f3dbc774a8da98e28e5b"><span class="id" title="variable">ϕΣ</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#M1"><span class="id" title="variable">M1</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦂</span></a>  <a class="idref" href="com.chainmail.restricted_properties.html#M2"><span class="id" title="variable">M2</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⦿</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6c4dbec1c9102e1076a6a6ca04576cf0"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#400139144b0aa6b3b29c58b97cf21976"><span class="id" title="notation">⤳</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">)</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">ϕ</span> ψ χ <span class="id" title="var">Σ</span> <span class="id" title="var">ϕΣ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hself</span> [σ <span class="id" title="var">H</span>σ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hself</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">has_self_</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">σ</span></a><a class="idref" href="com.chainmail.restricted_properties.html#1b9eca563c8b0fe6ab71a1c7aae1feb0"><span class="id" title="lemma">_top_frame_has_self_ϕ</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hself</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hselfϕ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hselfϕ</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H10</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">αthis</span> [<span class="id" title="var">othis</span> [<span class="id" title="var">Hαthis</span> <span class="id" title="var">Hothis</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.restricted_properties.html#restricted_internal_reductions_implies_internal_reductions"><span class="id" title="lemma">restricted_internal_reductions_implies_internal_reductions</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<span class="id" title="var">M1</span>:=<span class="id" title="var">M1</span>) (<span class="id" title="var">M2</span>:=<span class="id" title="var">M2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HϕΣ'</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">HϕΣ'</span> <span class="id" title="keyword">as</span> [σ' <span class="id" title="var">H</span>σ']); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>σ'; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> σ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="com.chainmail.loo_def.html#p_internal"><span class="id" title="constructor">p_internal</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">M</span>:=<span class="id" title="var">M</span>) (σ:=<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="com.chainmail.restricted_properties.html#restricted_reductions_external_self_implies_external_self"><span class="id" title="axiom">restricted_reductions_external_self_implies_external_self</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">M</span> <span class="id" title="var">M1</span> <span class="id" title="var">M2</span> <span class="id" title="var">Σ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>χ'<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ϕ</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> ψ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> σ χ <span class="id" title="var">ϕ</span> ψ σ'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="tactic">in</span> <span class="id" title="var">HϕΣ</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">loo_db</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;inversion&nbsp;Hσ';&nbsp;link_unique_auto;&nbsp;subst;&nbsp;eauto&nbsp;with&nbsp;loo_db.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;exists&nbsp;σ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;p_internal&nbsp;with&nbsp;(M:=M)&nbsp;(σ:=(χ,&nbsp;ϕ&nbsp;::&nbsp;ψ));&nbsp;eauto&nbsp;with&nbsp;loo_db.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(restricted_reductions_external_self_implies_external_self<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;M&nbsp;M1&nbsp;M2&nbsp;Σ&nbsp;(χ',&nbsp;ϕ&nbsp;::&nbsp;ψ)&nbsp;σ&nbsp;χ&nbsp;ϕ&nbsp;ψ&nbsp;σ'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;in&nbsp;HϕΣ;&nbsp;eauto&nbsp;with&nbsp;loo_db.&nbsp;*)</span><br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="comment">(*&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---<br/>
<br/>
TODO:&nbsp;The&nbsp;following&nbsp;may&nbsp;or&nbsp;do&nbsp;not&nbsp;hold,&nbsp;but&nbsp;will&nbsp;help&nbsp;future&nbsp;investigations<br/>
<br/>
&nbsp;&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;---&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="2e76fd44de30843c1df684ddbf35f2ea"><span class="id" title="lemma">exists_fresh_</span></a><a name="2e76fd44de30843c1df684ddbf35f2ea"><span class="id" title="lemma">χ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> χ ψ, <a class="idref" href="com.chainmail.loo_def.html#6ddc61948713415d14dfc3fe3aa35d16"><span class="id" title="inductive">σ</span></a><a class="idref" href="com.chainmail.loo_def.html#6ddc61948713415d14dfc3fe3aa35d16"><span class="id" title="inductive">_wf</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">α</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.loo_def.html#ef481509705fdfd180207fb6ca20fb83"><span class="id" title="inductive">fresh_</span></a><a class="idref" href="com.chainmail.loo_def.html#ef481509705fdfd180207fb6ca20fb83"><span class="id" title="inductive">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#ab410a966ac148e9b78c65c6cdf301fd"><span class="id" title="variable">α</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hexists_max_</span>χ : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <span class="id" title="var">α</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.loo_def.html#802201026484f6d0a69d4ec7fb27873d"><span class="id" title="inductive">max_</span></a><a class="idref" href="com.chainmail.loo_def.html#802201026484f6d0a69d4ec7fb27873d"><span class="id" title="inductive">χ</span></a> χ <a class="idref" href="com.chainmail.restricted_properties.html#ab410a966ac148e9b78c65c6cdf301fd"><span class="id" title="variable">α</span></a>). { <span class="id" title="var">admit</span>. }<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="restricted_fresh_implies_fresh"><span class="id" title="lemma">restricted_fresh_implies_fresh</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> χ χ' <span class="id" title="var">α</span> ψ <span class="id" title="var">Σ</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">↓</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="com.chainmail.loo_def.html#e94484876272d4d7c068e2b66889274e"><span class="id" title="notation">≜</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#6f9d76259b18aa9d2bd5fca149b789ed"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#ef481509705fdfd180207fb6ca20fb83"><span class="id" title="inductive">fresh_</span></a><a class="idref" href="com.chainmail.loo_def.html#ef481509705fdfd180207fb6ca20fb83"><span class="id" title="inductive">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#adfdac893eba58f9376b4ba8fdb610f5"><span class="id" title="variable">χ'</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#ab410a966ac148e9b78c65c6cdf301fd"><span class="id" title="variable">α</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.0/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="com.chainmail.loo_def.html#ef481509705fdfd180207fb6ca20fb83"><span class="id" title="inductive">fresh_</span></a><a class="idref" href="com.chainmail.loo_def.html#ef481509705fdfd180207fb6ca20fb83"><span class="id" title="inductive">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#cc5ca45a7ef59e588af3bf66d6f125ef"><span class="id" title="variable">χ</span></a> <a class="idref" href="com.chainmail.restricted_properties.html#ab410a966ac148e9b78c65c6cdf301fd"><span class="id" title="variable">α</span></a><br/>
.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> χ χ' <span class="id" title="var">α</span> ψ <span class="id" title="var">Σ</span> <span class="id" title="var">HϕΣ</span> <span class="id" title="var">Hfresh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfresh</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HϕΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H10</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Hb</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">α'</span> <span class="id" title="var">b'</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H11</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">b</span>:=<span class="id" title="var">b'</span>).<br/>
<span class="id" title="keyword">Abort</span>.<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;restricted_reduction_implies_reduction'&nbsp;:<br/>
&nbsp;&nbsp;forall&nbsp;M&nbsp;ϕ&nbsp;χ&nbsp;Σ&nbsp;ϕΣ,&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;↓&nbsp;Σ&nbsp;≜&nbsp;ϕΣ&nbsp;-&gt;&nbsp;has_self_ϕ&nbsp;χ&nbsp;ϕ&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(exists&nbsp;σ,&nbsp;M&nbsp;∙&nbsp;ϕΣ&nbsp;⤳&nbsp;σ)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(exists&nbsp;σ,&nbsp;M&nbsp;∙&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;⤳&nbsp;σ)<br/>
.<br/>
Proof.<br/>
&nbsp;&nbsp;intros&nbsp;M&nbsp;ϕ&nbsp;χ&nbsp;Σ&nbsp;ϕΣ&nbsp;HϕΣ&nbsp;Hself&nbsp;<span class="inlinecode">σ</span> <span class="inlinecode"><span class="id" title="var">H</span>σ</span>.<br/>
&nbsp;&nbsp;inversion&nbsp;Hself&nbsp;as&nbsp;<span class="inlinecode">χ<span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">ϕ_</span></span> <span class="inlinecode">[<span class="id" title="var">α_this</span></span> <span class="inlinecode">[[<span class="id" title="var">C_this</span></span> <span class="inlinecode"><span class="id" title="var">flds_this</span>]</span> <span class="inlinecode">[<span class="id" title="var">Hthisϕ</span></span> <span class="inlinecode"><span class="id" title="var">Hthis</span>χ]]]</span>.&nbsp;subst;&nbsp;simpl&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;inversion&nbsp;Hσ;&nbsp;subst;&nbsp;inversion&nbsp;HϕΣ;&nbsp;simpl&nbsp;in&nbsp;*;&nbsp;eauto&nbsp;with&nbsp;loo_db.<br/>
&nbsp;&nbsp;-&nbsp;inversion&nbsp;H2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H6.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;subst&nbsp;χ0&nbsp;χ1&nbsp;ϕ0&nbsp;ψ&nbsp;Σ0&nbsp;σ&nbsp;σ0&nbsp;v&nbsp;x0&nbsp;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;remember&nbsp;{|&nbsp;vMap&nbsp;:=&nbsp;vMap&nbsp;ϕ;&nbsp;contn&nbsp;:=&nbsp;c_hole&nbsp;x&nbsp;s'&nbsp;|}&nbsp;as&nbsp;ϕ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;remember&nbsp;{|&nbsp;vMap&nbsp;:=&nbsp;update&nbsp;this&nbsp;(v_addr&nbsp;α)&nbsp;(ps&nbsp;∘&nbsp;vMap&nbsp;ϕ);&nbsp;contn&nbsp;:=&nbsp;c_stmt&nbsp;s&nbsp;|}&nbsp;as&nbsp;ϕ''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(χ,&nbsp;ϕ''&nbsp;::&nbsp;ϕ'&nbsp;::&nbsp;nil).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(r_mth&nbsp;M&nbsp;ϕ&nbsp;nil&nbsp;χ&nbsp;x&nbsp;y&nbsp;ps&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;m&nbsp;zs&nbsp;α&nbsp;o&nbsp;s&nbsp;s'&nbsp;C&nbsp;ϕ'&nbsp;ϕ'');&nbsp;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;int_x.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;crush.<br/>
&nbsp;&nbsp;-&nbsp;subst&nbsp;χ0&nbsp;ϕ0&nbsp;ψ&nbsp;σ&nbsp;Σ0&nbsp;χ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(χ,&nbsp;{|&nbsp;vMap&nbsp;:=&nbsp;update&nbsp;x&nbsp;v&nbsp;(vMap&nbsp;ϕ);&nbsp;contn&nbsp;:=&nbsp;c_stmt&nbsp;s&nbsp;|}&nbsp;::&nbsp;nil).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(r_eAssgn&nbsp;M&nbsp;χ&nbsp;ϕ&nbsp;nil&nbsp;x&nbsp;e&nbsp;v&nbsp;s);&nbsp;auto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;restricted_evaluation_implies_evaluation&nbsp;with&nbsp;(ϕΣ:=(χ',&nbsp;ϕ&nbsp;::&nbsp;nil))&nbsp;(Σ:=Σ);&nbsp;eauto.<br/>
&nbsp;&nbsp;-&nbsp;inversion&nbsp;H2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H20.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;H27.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;subst;&nbsp;simpl&nbsp;in&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;mapp_iff_vMap_Some&nbsp;in&nbsp;H34.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;H34&nbsp;in&nbsp;Hthisϕ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;inversion&nbsp;Hthisϕ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;remember&nbsp;{|&nbsp;cname&nbsp;:=&nbsp;C_this;&nbsp;flds&nbsp;:=&nbsp;flds_this&nbsp;|}&nbsp;as&nbsp;o'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(o0&nbsp;=&nbsp;o').&nbsp;{&nbsp;eauto&nbsp;with&nbsp;loo_db.&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;subst&nbsp;α0&nbsp;o0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;rename&nbsp;χ1&nbsp;into&nbsp;χ,&nbsp;χ3&nbsp;into&nbsp;χ',&nbsp;ϕ0&nbsp;into&nbsp;ϕ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;remember&nbsp;(frm&nbsp;(vMap&nbsp;ϕ)&nbsp;(c_stmt&nbsp;s))&nbsp;as&nbsp;ϕ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;remember&nbsp;(update&nbsp;α&nbsp;o'&nbsp;χ)&nbsp;as&nbsp;χ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;exists&nbsp;(χ1,&nbsp;ϕ'&nbsp;::&nbsp;nil).<br/>
Admitted.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;SECOND&nbsp;HALF&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Inductive&nbsp;adapdation&nbsp;:&nbsp;config&nbsp;-&gt;&nbsp;config&nbsp;-&gt;&nbsp;config&nbsp;-&gt;&nbsp;Prop<br/>
&nbsp;&nbsp;<br/>
<br/>
Lemma&nbsp;second_half&nbsp;:<br/>
&nbsp;&nbsp;forall&nbsp;M&nbsp;M'&nbsp;χ&nbsp;ϕ&nbsp;χ&nbsp;χ'&nbsp;σ'&nbsp;σ'Σ&nbsp;σ0&nbsp;σ0Σ&nbsp;A&nbsp;Σ,&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;↓&nbsp;Σ&nbsp;≜&nbsp;(χ',&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;M&nbsp;⦂&nbsp;&nbsp;M'&nbsp;⦿&nbsp;(χ',&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;⤳⋆&nbsp;σ'Σ&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;M&nbsp;⦂&nbsp;&nbsp;M'&nbsp;⦿&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;⤳⋆&nbsp;σ'&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;◁&nbsp;σ'Σ&nbsp;≜&nbsp;σ'Σ_adapt&nbsp;-&gt;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;could&nbsp;use&nbsp;χ'&nbsp;here&nbsp;instead&nbsp;instead&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(χ,&nbsp;ϕ&nbsp;::&nbsp;nil)&nbsp;◁&nbsp;σ'&nbsp;≜&nbsp;σ'_adapt&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;M1&nbsp;⦂&nbsp;M2&nbsp;◎&nbsp;σ0Σ&nbsp;…&nbsp;σ'Σ_adapt&nbsp;⊨&nbsp;A&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;M1&nbsp;⦂&nbsp;M2&nbsp;◎&nbsp;σ0Σ&nbsp;…&nbsp;σ'_adapt&nbsp;⊨&nbsp;A<br/>
.<br/>
Proof.&nbsp;*)</span><br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
